import{d as j,e as v,u as f,r as o,j as e,B as h}from"./index--0iqMln5.js";import{I as t}from"./input-BHxrMRyP.js";import{C as w,a as y,b as N,c as C,d as b}from"./card-B65oY0MX.js";import{L as r}from"./label-DbRtzoGq.js";import{L as P}from"./loader-circle-lAhCrl4X.js";function q(){const[,i]=j(),{register:u,isAuthenticated:c}=v(),{toast:d}=f(),[l,m]=o.useState(!1),[s,p]=o.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",age:"",school:"",grade:""});o.useEffect(()=>{c&&i("/dashboard")},[c,i]);const a=n=>{p({...s,[n.target.name]:n.target.value})},x=async n=>{if(n.preventDefault(),s.password!==s.confirmPassword){d({title:"Passwords don't match",description:"Please make sure your passwords match",variant:"destructive"});return}if(s.password.length<6){d({title:"Password too short",description:"Password must be at least 6 characters",variant:"destructive"});return}m(!0);try{await u({name:s.name,email:s.email,password:s.password,phone:s.phone||void 0,age:s.age||void 0,school:s.school||void 0,grade:s.grade||void 0}),d({title:"Welcome to Teen Summit 2.0!",description:"Your account has been created successfully."}),i("/dashboard")}catch(g){d({title:"Registration failed",description:g.message||"Unable to create account",variant:"destructive"})}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 px-4 py-12",children:e.jsxs(w,{className:"w-full max-w-2xl",children:[e.jsxs(y,{className:"space-y-2",children:[e.jsx(N,{className:"font-montserrat text-3xl",children:"Join Teen Summit 2.0"}),e.jsx(C,{children:"Create your cast member account to get started"})]}),e.jsxs(b,{children:[e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Full Name *"}),e.jsx(t,{id:"name",name:"name",type:"text",value:s.name,onChange:a,required:!0,"data-testid":"input-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email *"}),e.jsx(t,{id:"email",name:"email",type:"email",value:s.email,onChange:a,required:!0,"data-testid":"input-email"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"password",children:"Password *"}),e.jsx(t,{id:"password",name:"password",type:"password",value:s.password,onChange:a,required:!0,"data-testid":"input-password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsx(t,{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:a,required:!0,"data-testid":"input-confirm-password"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phone",children:"Phone"}),e.jsx(t,{id:"phone",name:"phone",type:"tel",value:s.phone,onChange:a,"data-testid":"input-phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"age",children:"Age"}),e.jsx(t,{id:"age",name:"age",type:"text",value:s.age,onChange:a,"data-testid":"input-age"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"school",children:"School"}),e.jsx(t,{id:"school",name:"school",type:"text",value:s.school,onChange:a,"data-testid":"input-school"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"grade",children:"Grade"}),e.jsx(t,{id:"grade",name:"grade",type:"text",value:s.grade,onChange:a,"data-testid":"input-grade"})]})]}),e.jsxs(h,{type:"submit",className:"w-full",disabled:l,"data-testid":"button-register",children:[l&&e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]}),e.jsx("div",{className:"mt-6 text-center text-sm",children:e.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",e.jsx("button",{type:"button",className:"font-semibold text-primary hover:underline",onClick:()=>i("/login"),"data-testid":"link-login",children:"Sign in here"})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(h,{variant:"ghost",onClick:()=>i("/"),"data-testid":"link-home",children:"‚Üê Back to Home"})})]})]})})}export{q as default};
