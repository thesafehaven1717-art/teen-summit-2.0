var Os=Object.defineProperty;var Gs=(n,e,t)=>e in n?Os(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>Gs(n,typeof e!="symbol"?e+"":e,t);import{z as o}from"./form-3qQN-qb_.js";const s=Symbol.for("drizzle:entityKind");function T(n,e){if(!n||typeof n!="object")return!1;if(n instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,s))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(n).constructor;if(t)for(;t;){if(s in t&&t[s]===e[s])return!0;t=Object.getPrototypeOf(t)}return!1}var ce;ce=s;class L{constructor(e,t){r(this,"name");r(this,"keyAsName");r(this,"primary");r(this,"notNull");r(this,"default");r(this,"defaultFn");r(this,"onUpdateFn");r(this,"hasDefault");r(this,"isUnique");r(this,"uniqueName");r(this,"uniqueType");r(this,"dataType");r(this,"columnType");r(this,"enumValues");r(this,"generated");r(this,"generatedIdentity");r(this,"config");this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}r(L,ce,"Column");var de;de=s;class Yi{constructor(e,t,i){r(this,"config");r(this,"$default",this.$defaultFn);r(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}r(Yi,de,"ColumnBuilder");const F=Symbol.for("drizzle:Name");var me;me=s;class Zi{constructor(e,t){r(this,"reference");r(this,"_onUpdate","no action");r(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:a,foreignColumns:u}=e();return{name:i,columns:a,foreignTable:u[0].table,foreignColumns:u}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new ki(e,this)}}r(Zi,me,"PgForeignKeyBuilder");var ge;ge=s;class ki{constructor(e,t){r(this,"reference");r(this,"onUpdate");r(this,"onDelete");this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}getName(){const{name:e,columns:t,foreignColumns:i}=this.reference(),a=t.map(f=>f.name),u=i.map(f=>f.name),d=[this.table[F],...a,i[0].table[F],...u];return e??`${d.join("_")}_fk`}}r(ki,ge,"PgForeignKey");function Ks(n,...e){return n(...e)}function Xs(n,e){return`${n[F]}_${e.join("_")}_unique`}function ie(n,e,t){for(let i=e;i<n.length;i++){const a=n[i];if(a==="\\"){i++;continue}if(a==='"')return[n.slice(e,i).replace(/\\/g,""),i+1];if(!t&&(a===","||a==="}"))return[n.slice(e,i).replace(/\\/g,""),i]}return[n.slice(e).replace(/\\/g,""),n.length]}function er(n,e=0){const t=[];let i=e,a=!1;for(;i<n.length;){const u=n[i];if(u===","){(a||i===e)&&t.push(""),a=!0,i++;continue}if(a=!1,u==="\\"){i+=2;continue}if(u==='"'){const[p,y]=ie(n,i+1,!0);t.push(p),i=y;continue}if(u==="}")return[t,i+1];if(u==="{"){const[p,y]=er(n,i+1);t.push(p),i=y;continue}const[d,f]=ie(n,i,!1);t.push(d),i=f}return[t,i]}function Js(n){const[e]=er(n,1);return e}function tr(n){return`{${n.map(e=>Array.isArray(e)?tr(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var pe,fe;class g extends(fe=Yi,pe=s,fe){constructor(){super(...arguments);r(this,"foreignKeyConfigs",[])}array(t){return new ir(this.config.name,this,t)}references(t,i={}){return this.foreignKeyConfigs.push({ref:t,actions:i}),this}unique(t,i){return this.config.isUnique=!0,this.config.uniqueName=t,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(t){return this.config.generated={as:t,type:"always",mode:"stored"},this}buildForeignKeys(t,i){return this.foreignKeyConfigs.map(({ref:a,actions:u})=>Ks((d,f)=>{const p=new Zi(()=>{const y=d();return{columns:[t],foreignColumns:[y]}});return f.onUpdate&&p.onUpdate(f.onUpdate),f.onDelete&&p.onDelete(f.onDelete),p.build(i)},a,u))}buildExtraConfigColumn(t){return new nr(t,this.config)}}r(g,pe,"PgColumnBuilder");var he,ye;class m extends(ye=L,he=s,ye){constructor(e,t){t.uniqueName||(t.uniqueName=Xs(e,[t.name])),super(e,t),this.table=e}}r(m,he,"PgColumn");var be,Ne;class nr extends(Ne=m,be=s,Ne){constructor(){super(...arguments);r(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});r(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(t){return this.indexConfig.opClass=t,this}}r(nr,be,"ExtraConfigColumn");var Se;Se=s;class ${constructor(e,t,i,a){r(this,"name");r(this,"keyAsName");r(this,"type");r(this,"indexConfig");this.name=e,this.keyAsName=t,this.type=i,this.indexConfig=a}}r($,Se,"IndexedColumn");var Pe,we;class ir extends(we=g,Pe=s,we){constructor(e,t,i){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=i}build(e){const t=this.config.baseBuilder.build(e);return new k(e,this.config,t)}}r(ir,Pe,"PgArrayBuilder");var Te,xe;const R=class R extends(xe=m,Te=s,xe){constructor(t,i,a,u){super(t,i);r(this,"size");this.baseColumn=a,this.range=u,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(t){return typeof t=="string"&&(t=Js(t)),t.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(t,i=!1){const a=t.map(u=>u===null?null:T(this.baseColumn,R)?this.baseColumn.mapToDriverValue(u,!0):this.baseColumn.mapToDriverValue(u));return i?a:tr(a)}};r(R,Te,"PgArray");let k=R;const re=Symbol.for("drizzle:isPgEnum");function Rs(n){return!!n&&typeof n=="function"&&re in n&&n[re]===!0}var Ie;Ie=s;class te{constructor(e,t,i,a=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:i,isWith:a}}}r(te,Ie,"Subquery");const Hs={startActiveSpan(n,e){return e()}},z=Symbol.for("drizzle:ViewBaseConfig"),W=Symbol.for("drizzle:Schema"),se=Symbol.for("drizzle:Columns"),ae=Symbol.for("drizzle:ExtraConfigColumns"),Y=Symbol.for("drizzle:OriginalName"),Z=Symbol.for("drizzle:BaseName"),G=Symbol.for("drizzle:IsAlias"),oe=Symbol.for("drizzle:ExtraConfigBuilder"),rr=Symbol.for("drizzle:IsDrizzleTable");var _e,Ae,Ce,De,ve,qe,Be,Ve,Fe,ze;ze=s,Fe=F,Ve=Y,Be=W,qe=se,ve=ae,De=Z,Ce=G,Ae=rr,_e=oe;class C{constructor(e,t,i){r(this,Fe);r(this,Ve);r(this,Be);r(this,qe);r(this,ve);r(this,De);r(this,Ce,!1);r(this,Ae,!0);r(this,_e);this[F]=this[Y]=e,this[W]=t,this[Z]=i}}r(C,ze,"Table"),r(C,"Symbol",{Name:F,Schema:W,OriginalName:Y,Columns:se,ExtraConfigColumns:ae,BaseName:Z,IsAlias:G,ExtraConfigBuilder:oe});function sr(n){return typeof n=="object"&&n!==null&&rr in n}function Ws(n){return n!=null&&typeof n.getSQL=="function"}function Ys(n){var t;const e={sql:"",params:[]};for(const i of n)e.sql+=i.sql,e.params.push(...i.params),(t=i.typings)!=null&&t.length&&(e.typings||(e.typings=[]),e.typings.push(...i.typings));return e}var Le;Le=s;class v{constructor(e){r(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new P([this])}}r(v,Le,"StringChunk");var Me;Me=s;const B=class B{constructor(e){r(this,"decoder",ar);r(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Hs.startActiveSpan("drizzle.buildSQL",t=>{const i=this.buildQueryFromSourceParams(this.queryChunks,e);return t==null||t.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,t){const i=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:a,escapeName:u,escapeParam:d,prepareTyping:f,inlineParams:p,paramStartIndex:y}=i;return Ys(e.map(c=>{var q;if(T(c,v))return{sql:c.value.join(""),params:[]};if(T(c,K))return{sql:u(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const h=[new v("(")];for(const[x,$s]of c.entries())h.push($s),x<c.length-1&&h.push(new v(", "));return h.push(new v(")")),this.buildQueryFromSourceParams(h,i)}if(T(c,B))return this.buildQueryFromSourceParams(c.queryChunks,{...i,inlineParams:p||c.shouldInlineParams});if(T(c,C)){const h=c[C.Symbol.Schema],x=c[C.Symbol.Name];return{sql:h===void 0||c[G]?u(x):u(h)+"."+u(x),params:[]}}if(T(c,L)){const h=a.getColumnCasing(c);if(t.invokeSource==="indexes")return{sql:u(h),params:[]};const x=c.table[C.Symbol.Schema];return{sql:c.table[G]||x===void 0?u(c.table[C.Symbol.Name])+"."+u(h):u(x)+"."+u(c.table[C.Symbol.Name])+"."+u(h),params:[]}}if(T(c,ur)){const h=c[z].schema,x=c[z].name;return{sql:h===void 0||c[z].isAlias?u(x):u(h)+"."+u(x),params:[]}}if(T(c,ne)){if(T(c.value,J))return{sql:d(y.value++,c),params:[c],typings:["none"]};const h=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(T(h,B))return this.buildQueryFromSourceParams([h],i);if(p)return{sql:this.mapInlineParam(h,i),params:[]};let x=["none"];return f&&(x=[f(c.encoder)]),{sql:d(y.value++,h),params:[h],typings:x}}return T(c,J)?{sql:d(y.value++,c),params:[c],typings:["none"]}:T(c,B.Aliased)&&c.fieldAlias!==void 0?{sql:u(c.fieldAlias),params:[]}:T(c,te)?c._.isWith?{sql:u(c._.alias),params:[]}:this.buildQueryFromSourceParams([new v("("),c._.sql,new v(") "),new K(c._.alias)],i):Rs(c)?c.schema?{sql:u(c.schema)+"."+u(c.enumName),params:[]}:{sql:u(c.enumName),params:[]}:Ws(c)?(q=c.shouldOmitSQLParens)!=null&&q.call(c)?this.buildQueryFromSourceParams([c.getSQL()],i):this.buildQueryFromSourceParams([new v("("),c.getSQL(),new v(")")],i):p?{sql:this.mapInlineParam(c,i),params:[]}:{sql:d(y.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){const i=e.toString();return t(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new B.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};r(B,Me,"SQL");let P=B;var Qe;Qe=s;class K{constructor(e){r(this,"brand");this.value=e}getSQL(){return new P([this])}}r(K,Qe,"Name");const ar={mapFromDriverValue:n=>n},or={mapToDriverValue:n=>n};({...ar,...or});var Ue;Ue=s;class ne{constructor(e,t=or){r(this,"brand");this.value=e,this.encoder=t}getSQL(){return new P([this])}}r(ne,Ue,"Param");function X(n,...e){const t=[];(e.length>0||n.length>0&&n[0]!=="")&&t.push(new v(n[0]));for(const[i,a]of e.entries())t.push(a,new v(n[i+1]));return new P(t)}(n=>{function e(){return new P([])}n.empty=e;function t(p){return new P(p)}n.fromList=t;function i(p){return new P([new v(p)])}n.raw=i;function a(p,y){const c=[];for(const[q,h]of p.entries())q>0&&y!==void 0&&c.push(y),c.push(h);return new P(c)}n.join=a;function u(p){return new K(p)}n.identifier=u;function d(p){return new J(p)}n.placeholder=d;function f(p,y){return new ne(p,y)}n.param=f})(X||(X={}));(n=>{var t;t=s;const i=class i{constructor(u,d){r(this,"isSelectionField",!1);this.sql=u,this.fieldAlias=d}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};r(i,t,"SQL.Aliased");let e=i;n.Aliased=e})(P||(P={}));var je;je=s;class J{constructor(e){this.name=e}getSQL(){return new P([this])}}r(J,je,"Placeholder");const lr=Symbol.for("drizzle:IsDrizzleView");var Ee,$e,Oe;Oe=s,$e=z,Ee=lr;class ur{constructor({name:e,schema:t,selectedFields:i,query:a}){r(this,$e);r(this,Ee,!0);this[z]={name:e,originalName:e,schema:t,selectedFields:i,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new P([this])}}r(ur,Oe,"View");function Zs(n){return typeof n=="object"&&n!==null&&lr in n}L.prototype.getSQL=function(){return new P([this])};C.prototype.getSQL=function(){return new P([this])};te.prototype.getSQL=function(){return new P([this])};function ks(n){return n[C.Symbol.Columns]}function ea(n){return n[z].selectedFields}function I(n,e){return{name:typeof n=="string"&&n.length>0?n:"",config:typeof n=="object"?n:e}}var Ge,Ke;class j extends(Ke=g,Ge=s,Ke){generatedAlwaysAsIdentity(e){if(e){const{name:t,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:t,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}r(j,Ge,"PgIntColumnBaseBuilder");var Xe,Je;class cr extends(Je=j,Xe=s,Je){constructor(e){super(e,"number","PgBigInt53")}build(e){return new dr(e,this.config)}}r(cr,Xe,"PgBigInt53Builder");var Re,He;class dr extends(He=m,Re=s,He){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}r(dr,Re,"PgBigInt53");var We,Ye;class mr extends(Ye=j,We=s,Ye){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new gr(e,this.config)}}r(mr,We,"PgBigInt64Builder");var Ze,ke;class gr extends(ke=m,Ze=s,ke){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}r(gr,Ze,"PgBigInt64");function ta(n,e){const{name:t,config:i}=I(n,e);return i.mode==="number"?new cr(t):new mr(t)}var et,tt;class pr extends(tt=g,et=s,tt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new fr(e,this.config)}}r(pr,et,"PgBigSerial53Builder");var nt,it;class fr extends(it=m,nt=s,it){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}r(fr,nt,"PgBigSerial53");var rt,st;class hr extends(st=g,rt=s,st){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new yr(e,this.config)}}r(hr,rt,"PgBigSerial64Builder");var at,ot;class yr extends(ot=m,at=s,ot){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}r(yr,at,"PgBigSerial64");function na(n,e){const{name:t,config:i}=I(n,e);return i.mode==="number"?new pr(t):new hr(t)}var lt,ut;class br extends(ut=g,lt=s,ut){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Nr(e,this.config)}}r(br,lt,"PgBooleanBuilder");var ct,dt;class Nr extends(dt=m,ct=s,dt){getSQLType(){return"boolean"}}r(Nr,ct,"PgBoolean");function E(n){return new br(n??"")}var mt,gt;class Sr extends(gt=g,mt=s,gt){constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Pr(e,this.config)}}r(Sr,mt,"PgCharBuilder");var pt,ft;class Pr extends(ft=m,pt=s,ft){constructor(){super(...arguments);r(this,"length",this.config.length);r(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}r(Pr,pt,"PgChar");function ia(n,e={}){const{name:t,config:i}=I(n,e);return new Sr(t,i)}var ht,yt;class wr extends(yt=g,ht=s,yt){constructor(e){super(e,"string","PgCidr")}build(e){return new Tr(e,this.config)}}r(wr,ht,"PgCidrBuilder");var bt,Nt;class Tr extends(Nt=m,bt=s,Nt){getSQLType(){return"cidr"}}r(Tr,bt,"PgCidr");function ra(n){return new wr(n??"")}var St,Pt;class xr extends(Pt=g,St=s,Pt){constructor(e,t,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=i}build(e){return new Ir(e,this.config)}}r(xr,St,"PgCustomColumnBuilder");var wt,Tt;class Ir extends(Tt=m,wt=s,Tt){constructor(t,i){super(t,i);r(this,"sqlName");r(this,"mapTo");r(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return typeof this.mapFrom=="function"?this.mapFrom(t):t}mapToDriverValue(t){return typeof this.mapTo=="function"?this.mapTo(t):t}}r(Ir,wt,"PgCustomColumn");function sa(n){return(e,t)=>{const{name:i,config:a}=I(e,t);return new xr(i,a,n)}}var xt,It;class M extends(It=g,xt=s,It){defaultNow(){return this.default(X`now()`)}}r(M,xt,"PgDateColumnBaseBuilder");var _t,At;class _r extends(At=M,_t=s,At){constructor(e){super(e,"date","PgDate")}build(e){return new Ar(e,this.config)}}r(_r,_t,"PgDateBuilder");var Ct,Dt;class Ar extends(Dt=m,Ct=s,Dt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}r(Ar,Ct,"PgDate");var vt,qt;class Cr extends(qt=M,vt=s,qt){constructor(e){super(e,"string","PgDateString")}build(e){return new Dr(e,this.config)}}r(Cr,vt,"PgDateStringBuilder");var Bt,Vt;class Dr extends(Vt=m,Bt=s,Vt){getSQLType(){return"date"}}r(Dr,Bt,"PgDateString");function aa(n,e){const{name:t,config:i}=I(n,e);return(i==null?void 0:i.mode)==="date"?new _r(t):new Cr(t)}var Ft,zt;class vr extends(zt=g,Ft=s,zt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new qr(e,this.config)}}r(vr,Ft,"PgDoublePrecisionBuilder");var Lt,Mt;class qr extends(Mt=m,Lt=s,Mt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}r(qr,Lt,"PgDoublePrecision");function oa(n){return new vr(n??"")}var Qt,Ut;class Br extends(Ut=g,Qt=s,Ut){constructor(e){super(e,"string","PgInet")}build(e){return new Vr(e,this.config)}}r(Br,Qt,"PgInetBuilder");var jt,Et;class Vr extends(Et=m,jt=s,Et){getSQLType(){return"inet"}}r(Vr,jt,"PgInet");function la(n){return new Br(n??"")}var $t,Ot;class Fr extends(Ot=j,$t=s,Ot){constructor(e){super(e,"number","PgInteger")}build(e){return new zr(e,this.config)}}r(Fr,$t,"PgIntegerBuilder");var Gt,Kt;class zr extends(Kt=m,Gt=s,Kt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}r(zr,Gt,"PgInteger");function S(n){return new Fr(n??"")}var Xt,Jt;class Lr extends(Jt=g,Xt=s,Jt){constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new Mr(e,this.config)}}r(Lr,Xt,"PgIntervalBuilder");var Rt,Ht;class Mr extends(Ht=m,Rt=s,Ht){constructor(){super(...arguments);r(this,"fields",this.config.intervalConfig.fields);r(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const t=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${t}${i}`}}r(Mr,Rt,"PgInterval");function ua(n,e={}){const{name:t,config:i}=I(n,e);return new Lr(t,i)}var Wt,Yt;class Qr extends(Yt=g,Wt=s,Yt){constructor(e){super(e,"json","PgJson")}build(e){return new Ur(e,this.config)}}r(Qr,Wt,"PgJsonBuilder");var Zt,kt;class Ur extends(kt=m,Zt=s,kt){constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}r(Ur,Zt,"PgJson");function ca(n){return new Qr(n??"")}var en,tn;class jr extends(tn=g,en=s,tn){constructor(e){super(e,"json","PgJsonb")}build(e){return new Er(e,this.config)}}r(jr,en,"PgJsonbBuilder");var nn,rn;class Er extends(rn=m,nn=s,rn){constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}r(Er,nn,"PgJsonb");function da(n){return new jr(n??"")}var sn,an;class $r extends(an=g,sn=s,an){constructor(e){super(e,"array","PgLine")}build(e){return new Or(e,this.config)}}r($r,sn,"PgLineBuilder");var on,ln;class Or extends(ln=m,on=s,ln){getSQLType(){return"line"}mapFromDriverValue(e){const[t,i,a]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}r(Or,on,"PgLine");var un,cn;class Gr extends(cn=g,un=s,cn){constructor(e){super(e,"json","PgLineABC")}build(e){return new Kr(e,this.config)}}r(Gr,un,"PgLineABCBuilder");var dn,mn;class Kr extends(mn=m,dn=s,mn){getSQLType(){return"line"}mapFromDriverValue(e){const[t,i,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(i),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}r(Kr,dn,"PgLineABC");function ma(n,e){const{name:t,config:i}=I(n,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new $r(t):new Gr(t)}var gn,pn;class Xr extends(pn=g,gn=s,pn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Jr(e,this.config)}}r(Xr,gn,"PgMacaddrBuilder");var fn,hn;class Jr extends(hn=m,fn=s,hn){getSQLType(){return"macaddr"}}r(Jr,fn,"PgMacaddr");function ga(n){return new Xr(n??"")}var yn,bn;class Rr extends(bn=g,yn=s,bn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Hr(e,this.config)}}r(Rr,yn,"PgMacaddr8Builder");var Nn,Sn;class Hr extends(Sn=m,Nn=s,Sn){getSQLType(){return"macaddr8"}}r(Hr,Nn,"PgMacaddr8");function pa(n){return new Rr(n??"")}var Pn,wn;class Wr extends(wn=g,Pn=s,wn){constructor(e,t,i){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=i}build(e){return new Yr(e,this.config)}}r(Wr,Pn,"PgNumericBuilder");var Tn,xn;class Yr extends(xn=m,Tn=s,xn){constructor(t,i){super(t,i);r(this,"precision");r(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}r(Yr,Tn,"PgNumeric");function fa(n,e){const{name:t,config:i}=I(n,e);return new Wr(t,i==null?void 0:i.precision,i==null?void 0:i.scale)}var In,_n;class Zr extends(_n=g,In=s,_n){constructor(e){super(e,"array","PgPointTuple")}build(e){return new kr(e,this.config)}}r(Zr,In,"PgPointTupleBuilder");var An,Cn;class kr extends(Cn=m,An=s,Cn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,i]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}r(kr,An,"PgPointTuple");var Dn,vn;class es extends(vn=g,Dn=s,vn){constructor(e){super(e,"json","PgPointObject")}build(e){return new ts(e,this.config)}}r(es,Dn,"PgPointObjectBuilder");var qn,Bn;class ts extends(Bn=m,qn=s,Bn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[t,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}r(ts,qn,"PgPointObject");function ha(n,e){const{name:t,config:i}=I(n,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new Zr(t):new es(t)}function ya(n){const e=[];for(let t=0;t<n.length;t+=2)e.push(Number.parseInt(n.slice(t,t+2),16));return new Uint8Array(e)}function le(n,e){const t=new ArrayBuffer(8),i=new DataView(t);for(let a=0;a<8;a++)i.setUint8(a,n[e+a]);return i.getFloat64(0,!0)}function ns(n){const e=ya(n);let t=0;const i=e[t];t+=1;const a=new DataView(e.buffer),u=a.getUint32(t,i===1);if(t+=4,u&536870912&&(a.getUint32(t,i===1),t+=4),(u&65535)===1){const d=le(e,t);t+=8;const f=le(e,t);return t+=8,[d,f]}throw new Error("Unsupported geometry type")}var Vn,Fn;class is extends(Fn=g,Vn=s,Fn){constructor(e){super(e,"array","PgGeometry")}build(e){return new rs(e,this.config)}}r(is,Vn,"PgGeometryBuilder");var zn,Ln;class rs extends(Ln=m,zn=s,Ln){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ns(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}r(rs,zn,"PgGeometry");var Mn,Qn;class ss extends(Qn=g,Mn=s,Qn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new as(e,this.config)}}r(ss,Mn,"PgGeometryObjectBuilder");var Un,jn;class as extends(jn=m,Un=s,jn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const t=ns(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}r(as,Un,"PgGeometryObject");function ba(n,e){const{name:t,config:i}=I(n,e);return!(i!=null&&i.mode)||i.mode==="tuple"?new is(t):new ss(t)}var En,$n;class os extends($n=g,En=s,$n){constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new ls(e,this.config)}}r(os,En,"PgRealBuilder");var On,Gn;class ls extends(Gn=m,On=s,Gn){constructor(t,i){super(t,i);r(this,"mapFromDriverValue",t=>typeof t=="string"?Number.parseFloat(t):t)}getSQLType(){return"real"}}r(ls,On,"PgReal");function Na(n){return new os(n??"")}var Kn,Xn;class us extends(Xn=g,Kn=s,Xn){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new cs(e,this.config)}}r(us,Kn,"PgSerialBuilder");var Jn,Rn;class cs extends(Rn=m,Jn=s,Rn){getSQLType(){return"serial"}}r(cs,Jn,"PgSerial");function _(n){return new us(n??"")}var Hn,Wn;class ds extends(Wn=j,Hn=s,Wn){constructor(e){super(e,"number","PgSmallInt")}build(e){return new ms(e,this.config)}}r(ds,Hn,"PgSmallIntBuilder");var Yn,Zn;class ms extends(Zn=m,Yn=s,Zn){constructor(){super(...arguments);r(this,"mapFromDriverValue",t=>typeof t=="string"?Number(t):t)}getSQLType(){return"smallint"}}r(ms,Yn,"PgSmallInt");function Sa(n){return new ds(n??"")}var kn,ei;class gs extends(ei=g,kn=s,ei){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ps(e,this.config)}}r(gs,kn,"PgSmallSerialBuilder");var ti,ni;class ps extends(ni=m,ti=s,ni){getSQLType(){return"smallserial"}}r(ps,ti,"PgSmallSerial");function Pa(n){return new gs(n??"")}var ii,ri;class fs extends(ri=g,ii=s,ri){constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new hs(e,this.config)}}r(fs,ii,"PgTextBuilder");var si,ai;class hs extends(ai=m,si=s,ai){constructor(){super(...arguments);r(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}r(hs,si,"PgText");function l(n,e={}){const{name:t,config:i}=I(n,e);return new fs(t,i)}var oi,li;class ys extends(li=M,oi=s,li){constructor(e,t,i){super(e,"string","PgTime"),this.withTimezone=t,this.precision=i,this.config.withTimezone=t,this.config.precision=i}build(e){return new bs(e,this.config)}}r(ys,oi,"PgTimeBuilder");var ui,ci;class bs extends(ci=m,ui=s,ci){constructor(t,i){super(t,i);r(this,"withTimezone");r(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(bs,ui,"PgTime");function wa(n,e={}){const{name:t,config:i}=I(n,e);return new ys(t,i.withTimezone??!1,i.precision)}var di,mi;class Ns extends(mi=M,di=s,mi){constructor(e,t,i){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=i}build(e){return new Ss(e,this.config)}}r(Ns,di,"PgTimestampBuilder");var gi,pi;class Ss extends(pi=m,gi=s,pi){constructor(t,i){super(t,i);r(this,"withTimezone");r(this,"precision");r(this,"mapFromDriverValue",t=>new Date(this.withTimezone?t:t+"+0000"));r(this,"mapToDriverValue",t=>t.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(Ss,gi,"PgTimestamp");var fi,hi;class Ps extends(hi=M,fi=s,hi){constructor(e,t,i){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=i}build(e){return new ws(e,this.config)}}r(Ps,fi,"PgTimestampStringBuilder");var yi,bi;class ws extends(bi=m,yi=s,bi){constructor(t,i){super(t,i);r(this,"withTimezone");r(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(ws,yi,"PgTimestampString");function N(n,e={}){const{name:t,config:i}=I(n,e);return(i==null?void 0:i.mode)==="string"?new Ps(t,i.withTimezone??!1,i.precision):new Ns(t,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var Ni,Si;class Ts extends(Si=g,Ni=s,Si){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(X`gen_random_uuid()`)}build(e){return new xs(e,this.config)}}r(Ts,Ni,"PgUUIDBuilder");var Pi,wi;class xs extends(wi=m,Pi=s,wi){getSQLType(){return"uuid"}}r(xs,Pi,"PgUUID");function Ta(n){return new Ts(n??"")}var Ti,xi;class Is extends(xi=g,Ti=s,xi){constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new _s(e,this.config)}}r(Is,Ti,"PgVarcharBuilder");var Ii,_i;class _s extends(_i=m,Ii=s,_i){constructor(){super(...arguments);r(this,"length",this.config.length);r(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}r(_s,Ii,"PgVarchar");function xa(n,e={}){const{name:t,config:i}=I(n,e);return new Is(t,i)}var Ai,Ci;class As extends(Ci=g,Ai=s,Ci){constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new Cs(e,this.config)}}r(As,Ai,"PgBinaryVectorBuilder");var Di,vi;class Cs extends(vi=m,Di=s,vi){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}r(Cs,Di,"PgBinaryVector");function Ia(n,e){const{name:t,config:i}=I(n,e);return new As(t,i)}var qi,Bi;class Ds extends(Bi=g,qi=s,Bi){constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new vs(e,this.config)}}r(Ds,qi,"PgHalfVectorBuilder");var Vi,Fi;class vs extends(Fi=m,Vi=s,Fi){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}r(vs,Vi,"PgHalfVector");function _a(n,e){const{name:t,config:i}=I(n,e);return new Ds(t,i)}var zi,Li;class qs extends(Li=g,zi=s,Li){constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new Bs(e,this.config)}}r(qs,zi,"PgSparseVectorBuilder");var Mi,Qi;class Bs extends(Qi=m,Mi=s,Qi){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}r(Bs,Mi,"PgSparseVector");function Aa(n,e){const{name:t,config:i}=I(n,e);return new qs(t,i)}var Ui,ji;class Vs extends(ji=g,Ui=s,ji){constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new Fs(e,this.config)}}r(Vs,Ui,"PgVectorBuilder");var Ei,$i;class Fs extends($i=m,Ei=s,$i){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){return t.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}r(Fs,Ei,"PgVector");function Ca(n,e){const{name:t,config:i}=I(n,e);return new Vs(t,i)}function Da(){return{bigint:ta,bigserial:na,boolean:E,char:ia,cidr:ra,customType:sa,date:aa,doublePrecision:oa,inet:la,integer:S,interval:ua,json:ca,jsonb:da,line:ma,macaddr:ga,macaddr8:pa,numeric:fa,point:ha,geometry:ba,real:Na,serial:_,smallint:Sa,smallserial:Pa,text:l,time:wa,timestamp:N,uuid:Ta,varchar:xa,bit:Ia,halfvec:_a,sparsevec:Aa,vector:Ca}}const ee=Symbol.for("drizzle:PgInlineForeignKeys"),ue=Symbol.for("drizzle:EnableRLS");var Oi,Gi,Ki,Xi,Ji;class Q extends(Ji=C,Xi=s,Ki=ee,Gi=ue,Oi=C.Symbol.ExtraConfigBuilder,Ji){constructor(){super(...arguments);r(this,Ki,[]);r(this,Gi,!1);r(this,Oi)}}r(Q,Xi,"PgTable"),r(Q,"Symbol",Object.assign({},C.Symbol,{InlineForeignKeys:ee,EnableRLS:ue}));function va(n,e,t,i,a=n){const u=new Q(n,i,a),d=typeof e=="function"?e(Da()):e,f=Object.fromEntries(Object.entries(d).map(([c,q])=>{const h=q;h.setName(c);const x=h.build(u);return u[ee].push(...h.buildForeignKeys(x,u)),[c,x]})),p=Object.fromEntries(Object.entries(d).map(([c,q])=>{const h=q;h.setName(c);const x=h.buildExtraConfigColumn(u);return[c,x]})),y=Object.assign(u,f);return y[C.Symbol.Columns]=f,y[C.Symbol.ExtraConfigColumns]=p,t&&(y[Q.Symbol.ExtraConfigBuilder]=t),Object.assign(y,{enableRLS:()=>(y[Q.Symbol.EnableRLS]=!0,y)})}const A=(n,e,t)=>va(n,e,t,void 0);var Ri;Ri=s;class zs{constructor(e,t){this.unique=e,this.name=t}on(...e){return new O(e.map(t=>{if(T(t,P))return t;t=t;const i=new $(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new O(e.map(t=>{if(T(t,P))return t;t=t;const i=new $(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,i}),this.unique,!0,this.name)}using(e,...t){return new O(t.map(i=>{if(T(i,P))return i;i=i;const a=new $(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),a}),this.unique,!0,this.name,e)}}r(zs,Ri,"PgIndexBuilderOn");var Hi;Hi=s;class O{constructor(e,t,i,a,u="btree"){r(this,"config");this.config={name:a,columns:e,unique:t,only:i,method:u}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Ls(this.config,e)}}r(O,Hi,"PgIndexBuilder");var Wi;Wi=s;class Ls{constructor(e,t){r(this,"config");this.config={...e,table:t}}}r(Ls,Wi,"PgIndex");function U(n){return new zs(!1,n)}const b={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function w(n,e){return e.includes(n.columnType)}function qa(n){return"enumValues"in n&&Array.isArray(n.enumValues)&&n.enumValues.length>0}const Ba=o.union([o.string(),o.number(),o.boolean(),o.null()]),Va=o.union([Ba,o.record(o.any()),o.array(o.any())]),Fa=o.custom(n=>n instanceof Buffer);function Ms(n,e){const t=(e==null?void 0:e.zodInstance)??o,i=(e==null?void 0:e.coerce)??{};let a;return qa(n)&&(a=n.enumValues.length?t.enum(n.enumValues):t.string()),a||(w(n,["PgGeometry","PgPointTuple"])?a=t.tuple([t.number(),t.number()]):w(n,["PgGeometryObject","PgPointObject"])?a=t.object({x:t.number(),y:t.number()}):w(n,["PgHalfVector","PgVector"])?(a=t.array(t.number()),a=n.dimensions?a.length(n.dimensions):a):w(n,["PgLine"])?a=t.tuple([t.number(),t.number(),t.number()]):w(n,["PgLineABC"])?a=t.object({a:t.number(),b:t.number(),c:t.number()}):w(n,["PgArray"])?(a=t.array(Ms(n.baseColumn,t)),a=n.size?a.length(n.size):a):n.dataType==="array"?a=t.array(t.any()):n.dataType==="number"?a=za(n,t,i):n.dataType==="bigint"?a=La(n,t,i):n.dataType==="boolean"?a=i===!0||i.boolean?t.coerce.boolean():t.boolean():n.dataType==="date"?a=i===!0||i.date?t.coerce.date():t.date():n.dataType==="string"?a=Ma(n,t,i):n.dataType==="json"?a=Va:n.dataType==="custom"?a=t.any():n.dataType==="buffer"&&(a=Fa)),a||(a=t.any()),a}function za(n,e,t){let i=n.getSQLType().includes("unsigned"),a,u,d=!1;w(n,["MySqlTinyInt","SingleStoreTinyInt"])?(a=i?0:b.INT8_MIN,u=i?b.INT8_UNSIGNED_MAX:b.INT8_MAX,d=!0):w(n,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=i?0:b.INT16_MIN,u=i?b.INT16_UNSIGNED_MAX:b.INT16_MAX,d=!0):w(n,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=i?0:b.INT24_MIN,u=i?b.INT24_UNSIGNED_MAX:b.INT24_MAX,d=w(n,["MySqlMediumInt","SingleStoreMediumInt"])):w(n,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=i?0:b.INT32_MIN,u=i?b.INT32_UNSIGNED_MAX:b.INT32_MAX,d=!0):w(n,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=i?0:b.INT48_MIN,u=i?b.INT48_UNSIGNED_MAX:b.INT48_MAX):w(n,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||w(n,["MySqlSerial","SingleStoreSerial"]),a=i?0:Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,d=!0):w(n,["MySqlYear","SingleStoreYear"])?(a=1901,u=2155,d=!0):(a=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER);let f=t===!0||t!=null&&t.number?e.coerce.number():e.number();return f=f.min(a).max(u),d?f.int():f}function La(n,e,t){const i=n.getSQLType().includes("unsigned"),a=i?0n:b.INT64_MIN,u=i?b.INT64_UNSIGNED_MAX:b.INT64_MAX;return(t===!0||t!=null&&t.bigint?e.coerce.bigint():e.bigint()).min(a).max(u)}function Ma(n,e,t){if(w(n,["PgUUID"]))return e.string().uuid();let i,a,u=!1;w(n,["PgVarchar","SQLiteText"])?i=n.length:w(n,["MySqlVarChar","SingleStoreVarChar"])?i=n.length??b.INT16_UNSIGNED_MAX:w(n,["MySqlText","SingleStoreText"])&&(n.textType==="longtext"?i=b.INT32_UNSIGNED_MAX:n.textType==="mediumtext"?i=b.INT24_UNSIGNED_MAX:n.textType==="text"?i=b.INT16_UNSIGNED_MAX:i=b.INT8_UNSIGNED_MAX),w(n,["PgChar","MySqlChar","SingleStoreChar"])&&(i=n.length,u=!0),w(n,["PgBinaryVector"])&&(a=/^[01]+$/,i=n.dimensions);let d=t===!0||t!=null&&t.string?e.coerce.string():e.string();return d=a?d.regex(a):d,i&&u?d.length(i):i?d.max(i):d}function Qs(n){return sr(n)?ks(n):ea(n)}function Us(n,e,t,i){const a={};for(const[u,d]of Object.entries(n)){if(!T(d,L)&&!T(d,P)&&!T(d,P.Aliased)&&typeof d=="object"){const q=sr(d)||Zs(d)?Qs(d):d;a[u]=Us(q,e[u]??{},t,i);continue}const f=e[u];if(f!==void 0&&typeof f!="function"){a[u]=f;continue}const p=T(d,L)?d:void 0,y=p?Ms(p,i):o.any(),c=typeof f=="function"?f(y):y;t.never(p)||(a[u]=c,p&&(t.nullable(p)&&(a[u]=a[u].nullable()),t.optional(p)&&(a[u]=a[u].optional())))}return o.object(a)}const Qa={never:n=>{var e,t;return((e=n==null?void 0:n.generated)==null?void 0:e.type)==="always"||((t=n==null?void 0:n.generatedIdentity)==null?void 0:t.type)==="always"},optional:n=>!n.notNull||n.notNull&&n.hasDefault,nullable:n=>!n.notNull},D=(n,e)=>{const t=Qs(n);return Us(t,{},Qa)},Ya=o.object({email:o.string().email("Please enter a valid email address")}),Za=o.object({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),phone:o.string().optional(),message:o.string().min(10,"Please provide more details about why you'd like to be a guest"),fileUrl:o.string().optional()}),ka=o.object({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),phone:o.string().optional(),interests:o.string().min(10,"Please tell us about your interests and skills"),availability:o.string().min(1,"Please let us know your availability")});o.object({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),subject:o.string().min(1,"Subject is required"),message:o.string().min(10,"Please provide more details")});const eo=o.object({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),phone:o.string().min(1,"Phone number is required"),age:o.string().min(1,"Age is required"),school:o.string().min(1,"School name is required"),grade:o.string().min(1,"Grade level is required"),parentName:o.string().min(1,"Parent/Guardian name is required"),parentEmail:o.string().email("Please enter a valid parent/guardian email address"),parentPhone:o.string().min(1,"Parent/Guardian phone is required"),whyJoin:o.string().min(20,"Please tell us more about why you want to join (at least 20 characters)")}),Ua=A("newsletter_signups",{id:_("id").primaryKey(),email:l("email").notNull(),createdAt:N("created_at").notNull().defaultNow()}),ja=A("guest_applications",{id:_("id").primaryKey(),name:l("name").notNull(),email:l("email").notNull(),phone:l("phone"),message:l("message").notNull(),fileUrl:l("file_url"),createdAt:N("created_at").notNull().defaultNow()}),Ea=A("volunteer_applications",{id:_("id").primaryKey(),name:l("name").notNull(),email:l("email").notNull(),phone:l("phone"),interests:l("interests").notNull(),availability:l("availability").notNull(),createdAt:N("created_at").notNull().defaultNow()}),$a=A("contact_submissions",{id:_("id").primaryKey(),name:l("name").notNull(),email:l("email").notNull(),subject:l("subject").notNull(),message:l("message").notNull(),createdAt:N("created_at").notNull().defaultNow()}),Oa=A("summiteer_applications",{id:_("id").primaryKey(),name:l("name").notNull(),email:l("email").notNull(),phone:l("phone").notNull(),age:l("age").notNull(),school:l("school").notNull(),grade:l("grade").notNull(),parentName:l("parent_name").notNull(),parentEmail:l("parent_email").notNull(),parentPhone:l("parent_phone").notNull(),whyJoin:l("why_join").notNull(),createdAt:N("created_at").notNull().defaultNow()});D(Ua).omit({id:!0,createdAt:!0}).extend({email:o.string().email("Please enter a valid email address")});D(ja).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),message:o.string().min(10,"Please provide more details about why you'd like to be a guest")});D(Ea).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),interests:o.string().min(10,"Please tell us about your interests and skills"),availability:o.string().min(1,"Please let us know your availability")});const to=D($a).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),subject:o.string().min(1,"Subject is required"),message:o.string().min(10,"Please provide more details")});D(Oa).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address"),phone:o.string().min(1,"Phone number is required"),age:o.string().min(1,"Age is required"),school:o.string().min(1,"School name is required"),grade:o.string().min(1,"Grade level is required"),parentName:o.string().min(1,"Parent/Guardian name is required"),parentEmail:o.string().email("Please enter a valid parent/guardian email address"),parentPhone:o.string().min(1,"Parent/Guardian phone is required"),whyJoin:o.string().min(20,"Please tell us more about why you want to join (at least 20 characters)")});const H=A("users",{id:_("id").primaryKey(),email:l("email").notNull().unique(),passwordHash:l("password_hash").notNull(),role:l("role").notNull().default("cast_member"),createdAt:N("created_at").notNull().defaultNow()}),V=A("cast_members",{id:_("id").primaryKey(),userId:S("user_id").notNull().references(()=>H.id),name:l("name").notNull(),email:l("email").notNull(),phone:l("phone"),age:l("age"),school:l("school"),grade:l("grade"),bio:l("bio"),avatarUrl:l("avatar_url"),socialInstagram:l("social_instagram"),socialTwitter:l("social_twitter"),socialTiktok:l("social_tiktok"),active:E("active").notNull().default(!0),createdAt:N("created_at").notNull().defaultNow()},n=>({userIdIdx:U("cast_members_user_id_idx").on(n.userId)})),Ga=A("blog_posts",{id:_("id").primaryKey(),authorId:S("author_id").notNull().references(()=>V.id),title:l("title").notNull(),slug:l("slug").notNull().unique(),content:l("content").notNull(),excerpt:l("excerpt"),coverImageUrl:l("cover_image_url"),category:l("category"),tags:l("tags").array(),status:l("status").notNull().default("draft"),publishedAt:N("published_at"),createdAt:N("created_at").notNull().defaultNow(),updatedAt:N("updated_at").notNull().defaultNow()},n=>({statusIdx:U("blog_posts_status_idx").on(n.status),authorIdIdx:U("blog_posts_author_id_idx").on(n.authorId)})),js=A("filming_schedule",{id:_("id").primaryKey(),title:l("title").notNull(),description:l("description"),date:N("date").notNull(),startTime:l("start_time").notNull(),endTime:l("end_time").notNull(),location:l("location").notNull(),callTime:l("call_time"),notes:l("notes"),createdAt:N("created_at").notNull().defaultNow()});A("cast_member_schedule",{id:_("id").primaryKey(),castMemberId:S("cast_member_id").notNull().references(()=>V.id),scheduleId:S("schedule_id").notNull().references(()=>js.id),confirmed:E("confirmed").notNull().default(!1),notes:l("notes"),createdAt:N("created_at").notNull().defaultNow()});const Es=A("episodes",{id:_("id").primaryKey(),title:l("title").notNull(),slug:l("slug").notNull().unique(),description:l("description"),episodeNumber:S("episode_number").notNull(),season:S("season").notNull().default(1),topic:l("topic"),tags:l("tags").array(),videoUrl:l("video_url"),thumbnailUrl:l("thumbnail_url"),captionsUrl:l("captions_url"),transcriptUrl:l("transcript_url"),audioDescriptionUrl:l("audio_description_url"),duration:l("duration"),views:S("views").notNull().default(0),airDate:N("air_date"),published:E("published").notNull().default(!1),createdAt:N("created_at").notNull().defaultNow()},n=>({publishedIdx:U("episodes_published_idx").on(n.published),episodeNumberIdx:U("episodes_episode_number_idx").on(n.episodeNumber)}));A("cast_member_episodes",{id:_("id").primaryKey(),castMemberId:S("cast_member_id").notNull().references(()=>V.id),episodeId:S("episode_id").notNull().references(()=>Es.id),role:l("role"),createdAt:N("created_at").notNull().defaultNow()});const Ka=A("dossiers",{id:_("id").primaryKey(),title:l("title").notNull(),slug:l("slug").notNull().unique(),description:l("description"),topic:l("topic").notNull(),fileUrl:l("file_url").notNull(),fileSize:S("file_size"),fileType:l("file_type"),uploadedBy:S("uploaded_by").notNull().references(()=>V.id),published:E("published").notNull().default(!1),downloads:S("downloads").notNull().default(0),createdAt:N("created_at").notNull().defaultNow(),updatedAt:N("updated_at").notNull().defaultNow()}),Xa=A("parents",{id:_("id").primaryKey(),userId:S("user_id").notNull().references(()=>H.id),name:l("name").notNull(),email:l("email").notNull(),phone:l("phone"),castMemberId:S("cast_member_id").references(()=>V.id),createdAt:N("created_at").notNull().defaultNow()}),Ja=A("educators",{id:_("id").primaryKey(),userId:S("user_id").notNull().references(()=>H.id),name:l("name").notNull(),email:l("email").notNull(),phone:l("phone"),school:l("school"),subject:l("subject"),grade:l("grade"),createdAt:N("created_at").notNull().defaultNow()}),Ra=A("social_analytics",{id:_("id").primaryKey(),castMemberId:S("cast_member_id").notNull().references(()=>V.id),platform:l("platform").notNull(),followers:S("followers").notNull().default(0),likes:S("likes").notNull().default(0),comments:S("comments").notNull().default(0),shares:S("shares").notNull().default(0),engagementRate:S("engagement_rate"),recordedAt:N("recorded_at").notNull().defaultNow(),createdAt:N("created_at").notNull().defaultNow()});D(H).omit({id:!0,createdAt:!0}).extend({email:o.string().email("Please enter a valid email address"),passwordHash:o.string().min(1)});D(V).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address")});D(Ga).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({title:o.string().min(1,"Title is required"),content:o.string().min(50,"Content must be at least 50 characters"),slug:o.string().optional(),status:o.string().optional(),publishedAt:o.date().nullable().optional()});D(Es).omit({id:!0,createdAt:!0}).extend({title:o.string().min(1,"Title is required"),slug:o.string().min(1,"Slug is required"),episodeNumber:o.number().min(1)});D(Xa).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address")});D(Ja).omit({id:!0,createdAt:!0}).extend({name:o.string().min(1,"Name is required"),email:o.string().email("Please enter a valid email address")});D(js).omit({id:!0,createdAt:!0}).extend({title:o.string().min(1,"Title is required"),location:o.string().min(1,"Location is required")});D(Ra).omit({id:!0,createdAt:!0}).extend({castMemberId:o.number().int().min(1),platform:o.enum(["instagram","tiktok","youtube","twitter","linkedin"],{errorMap:()=>({message:"Platform must be one of: instagram, tiktok, youtube, twitter, linkedin"})}),followers:o.number().int().min(0),likes:o.number().int().min(0),comments:o.number().int().min(0),shares:o.number().int().min(0),engagementRate:o.number().int().min(0).nullable().optional(),recordedAt:o.date().optional()});D(Ka).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({title:o.string().min(1,"Title is required"),slug:o.string().min(1,"Slug is required"),topic:o.string().min(1,"Topic is required"),fileUrl:o.string().min(1,"File URL is required")});export{Za as g,to as i,Ya as n,eo as s,ka as v};
