import{W as p,u,H as j,a as g,r as f,j as e,L as r,B as d}from"./index--0iqMln5.js";import{C as l,a as c,b as m,d as x,c as b}from"./card-B65oY0MX.js";import{B as o}from"./badge-hkkynMrF.js";import{S as v}from"./seo-C49FiAsT.js";import{B as N,S as w}from"./breadcrumb-BVGYmXVz.js";import{A as y}from"./arrow-left-CnsmLl8k.js";import{E as T}from"./eye-CSsqWc40.js";import{C as E}from"./calendar-DoBVFTCc.js";import"./index-CNVxJXxz.js";import"./index-DJwLstOT.js";import"./chevron-right-iQwHnjL5.js";import"./check-CO3pM8TR.js";import"./facebook-B4gXDdgQ.js";import"./twitter-wczTJTXB.js";import"./linkedin-JYjvJkRx.js";function q(){const{slug:i}=p();u();const{data:s,isLoading:h}=j({queryKey:["/api/episodes",i],queryFn:async()=>{const t=await fetch(`/api/episodes/${i}`);if(!t.ok)throw new Error("Failed to fetch episode");return t.json()},enabled:!!i}),a=g({mutationFn:async t=>{const n=await fetch(`/api/episodes/${t}/view`,{method:"POST"});if(!n.ok)throw new Error("Failed to increment views");return n.json()}});return f.useEffect(()=>{if(s&&!a.data){const t=setTimeout(()=>{a.mutate(s.id)},3e3);return()=>clearTimeout(t)}},[s,a]),h?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("main",{className:"container mx-auto px-4 py-8 mt-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg animate-pulse mb-6"}),e.jsx("div",{className:"h-10 bg-muted rounded w-3/4 mb-4 animate-pulse"}),e.jsx("div",{className:"h-6 bg-muted rounded w-1/2 mb-6 animate-pulse"}),e.jsx("div",{className:"h-32 bg-muted rounded animate-pulse"})]})})}):s?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(v,{title:s.title,description:s.description||`Watch Episode ${s.episodeNumber} of Teen Summit 2.0 featuring debate and discussion on ${s.topic||"critical social issues"}.`,keywords:s.tags||["teen debate","civic engagement","youth media"],ogType:"video.episode",ogImage:s.thumbnailUrl||void 0}),e.jsx("main",{className:"container mx-auto px-4 py-8 mt-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx(N,{items:[{label:"Home",href:"/"},{label:"Episodes",href:"/episodes"},{label:s.title}]}),e.jsx("div",{className:"aspect-video bg-black rounded-lg overflow-hidden mb-6",children:s.videoUrl?e.jsxs("video",{controls:!0,className:"w-full h-full",poster:s.thumbnailUrl||void 0,"data-testid":"video-player",children:[e.jsx("source",{src:s.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg mb-2",children:"Video coming soon"}),e.jsx("p",{className:"text-sm text-white/60",children:"This episode is being processed"})]})})}),e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"secondary","data-testid":"badge-episode-number",children:["Episode ",s.episodeNumber]}),s.season>1&&e.jsxs(o,{variant:"outline",children:["Season ",s.season]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsxs("span",{"data-testid":"text-views",children:[s.views.toLocaleString()," views"]})]}),s.airDate&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.airDate).toLocaleDateString()})]}),e.jsx(w,{title:s.title,description:s.description||void 0})]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4","data-testid":"heading-episode-title",children:s.title}),s.topic&&e.jsx("p",{className:"text-lg font-medium text-foreground/90 mb-4","data-testid":"text-episode-topic",children:s.topic}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:s.tags.map(t=>e.jsx(o,{variant:"outline","data-testid":`badge-tag-${t.toLowerCase().replace(/\s+/g,"-")}`,children:t},t))}),s.description&&e.jsxs(l,{className:"mb-8",children:[e.jsx(c,{children:e.jsx(m,{children:"About This Episode"})}),e.jsx(x,{children:e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap","data-testid":"text-episode-description",children:s.description})})]}),e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(m,{children:"What is Teen Summit 2.0?"}),e.jsx(b,{children:"A reimagined civic engagement series teaching critical thinking through debate, music, and dialogue"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"The Three-Act Format"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Act I - The Debate:"})," Teams argue both sides of complex issues"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Act II - The Musicology:"})," DJ Silkee provides cultural context through sound"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Act III - The Podcast:"})," Cast members process and reflect on what they learned"]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(r,{href:"/",children:e.jsx(d,{variant:"outline",children:"Learn More About the Show"})}),e.jsx(r,{href:"/apply/summiteer",children:e.jsx(d,{children:"Apply to Be a Cast Member"})})]})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-background",children:e.jsx("main",{className:"container mx-auto px-4 py-8 mt-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto text-center py-12",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Episode Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The episode you're looking for doesn't exist or hasn't been published yet."}),e.jsx(r,{href:"/episodes",children:e.jsxs(d,{children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Back to Episodes"]})})]})})})}export{q as default};
