var _s=Object.defineProperty;var qt=i=>{throw TypeError(i)};var ws=(i,e,t)=>e in i?_s(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>ws(i,typeof e!="symbol"?e+"":e,t),et=(i,e,t)=>e.has(i)||qt("Cannot "+t);var _=(i,e,t)=>(et(i,e,"read from private field"),t?t.call(i):e.get(i)),A=(i,e,t)=>e.has(i)?qt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),B=(i,e,t,s)=>(et(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),re=(i,e,t)=>(et(i,e,"access private method"),t);import{B as Fs,p as ct,d as Cs}from"./dashboard-YvUCvqL6.js";import{E as Ss}from"./index--0iqMln5.js";import"./card-B65oY0MX.js";import"./badge-hkkynMrF.js";import"./tabs-Bx3VpB_R.js";import"./index-DJwLstOT.js";import"./index-CNVxJXxz.js";import"./avatar-Hsi_RK8V.js";import"./form-3qQN-qb_.js";import"./label-DbRtzoGq.js";import"./input-BHxrMRyP.js";import"./chevron-down-CJmsOpq0.js";import"./check-CO3pM8TR.js";import"./textarea-vY3jgLw9.js";import"./trending-up-DJTI7Ca7.js";import"./calendar-DoBVFTCc.js";import"./user-B1Cx1ISO.js";import"./sparkles-BNFhMtNu.js";import"./target-CeiPE47H.js";import"./lightbulb-CIlKO3XV.js";import"./youtube-CiMx9fO3.js";import"./music-CVIctBfn.js";import"./twitter-wczTJTXB.js";import"./linkedin-JYjvJkRx.js";import"./download-rw0jI8MC.js";const Ts=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function Ps(i,e,t){const s=Ts.exec(i),n=e.mimeType??(s==null?void 0:s[1])??"plain/text";let r;if((s==null?void 0:s[2])!=null){const a=atob(decodeURIComponent(s[3])),l=new Uint8Array(a.length);for(let h=0;h<a.length;h++)l[h]=a.charCodeAt(h);r=[l]}else(s==null?void 0:s[3])!=null&&(r=[decodeURIComponent(s[3])]);return new Blob(r,{type:n})}function Wt(i,e,t,s){return i===e?i:s===0?e:i+(e-i)*2**(-s/t)}const Ei=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function Oi(i){return typeof i!="object"||i===null||!("nodeType"in i)?!1:i.nodeType===Node.ELEMENT_NODE}function jt(i){if(typeof i=="string"){const e=document.querySelectorAll(i);return e.length===0?null:Array.from(e)}return typeof i=="object"&&Oi(i)?[i]:null}function ks(i,e=document){return typeof i=="string"?e.querySelector(i):Oi(i)?i:null}const be=Array.from;function Ds(i){const e=be(i.files);return Promise.resolve(e)}function Ni(i,e,t,{onSuccess:s}){i.readEntries(n=>{const r=[...e,...n];n.length?queueMicrotask(()=>{Ni(i,r,t,{onSuccess:s})}):s(r)},n=>{t(n),s(e)})}function Ii(i,e){return i==null?i:{kind:i.isFile?"file":i.isDirectory?"directory":void 0,name:i.name,getFile(){return new Promise((t,s)=>i.file(t,s))},async*values(){const t=i.createReader();yield*await new Promise(n=>{Ni(t,[],e,{onSuccess:r=>n(r.map(a=>Ii(a,e)))})})},isSameEntry:void 0}}async function*Bi(i,e,t=void 0){const s=()=>`${e}/${i.name}`;if(i.kind==="file"){const n=await i.getFile();n!=null?(n.relativePath=e?s():null,yield n):t!=null&&(yield t)}else if(i.kind==="directory")for await(const n of i.values())yield*Bi(n,e?s():i.name);else t!=null&&(yield t)}async function*As(i,e){const t=await Promise.all(Array.from(i.items,async s=>{let n;return n??(n=Ii(typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry(),e)),{fileSystemHandle:n,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:n}of t)if(n!=null)try{yield*Bi(n,"",s)}catch(r){s!=null?yield s:e(r)}else s!=null&&(yield s)}async function Es(i,e){const t=(e==null?void 0:e.logDropError)??Function.prototype;try{const s=[];for await(const n of As(i,t))s.push(n);return s}catch{return Ds(i)}}function Os(i){for(;i&&!i.dir;)i=i.parentNode;return i==null?void 0:i.dir}function Ns(){if(typeof window>"u")return!1;const i=document.body;return!(i==null||window==null||!("draggable"in i)||!("ondragstart"in i)||!("ondrop"in i)||!("FormData"in window)||!("FileReader"in window))}function Gt(i){return i.startsWith("blob:")}function Kt(i){return i?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(i):!1}function Is(i){const e=Math.floor(i/3600)%24,t=Math.floor(i/60)%60,s=Math.floor(i%60);return{hours:e,minutes:t,seconds:s}}function Bs(i){const e=Is(i),t=e.hours===0?"":`${e.hours}h`,s=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${s}${n}`}const tt="...";function Ui(i,e){if(e===0)return"";if(i.length<=e)return i;if(e<=tt.length+1)return`${i.slice(0,e-1)}â€¦`;const t=e-tt.length,s=Math.ceil(t/2),n=Math.floor(t/2);return i.slice(0,s)+tt+i.slice(-n)}var ke,P,Mi,te,Xt,Li,Ri,xi,St,pt,ft,_e={},zi=[],Us=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,De=Array.isArray;function j(i,e){for(var t in e)i[t]=e[t];return i}function Tt(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Pt(i,e,t){var s,n,r,a={};for(r in e)r=="key"?s=e[r]:r=="ref"?n=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?ke.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(r in i.defaultProps)a[r]===void 0&&(a[r]=i.defaultProps[r]);return ve(i,a,s,n,null)}function ve(i,e,t,s,n){var r={type:i,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Mi,__i:-1,__u:0};return n==null&&P.vnode!=null&&P.vnode(r),r}function Ms(){return{current:null}}function Y(i){return i.children}function G(i,e){this.props=i,this.context=e}function ce(i,e){if(e==null)return i.__?ce(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?ce(i):null}function $i(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return $i(i)}}function Yt(i){(!i.__d&&(i.__d=!0)&&te.push(i)&&!ze.__r++||Xt!=P.debounceRendering)&&((Xt=P.debounceRendering)||Li)(ze)}function ze(){for(var i,e,t,s,n,r,a,l=1;te.length;)te.length>l&&te.sort(Ri),i=te.shift(),l=te.length,i.__d&&(t=void 0,s=void 0,n=(s=(e=i).__v).__e,r=[],a=[],e.__P&&((t=j({},s)).__v=s.__v+1,P.vnode&&P.vnode(t),kt(e.__P,t,s,e.__n,e.__P.namespaceURI,32&s.__u?[n]:null,r,n??ce(s),!!(32&s.__u),a),t.__v=s.__v,t.__.__k[t.__i]=t,qi(r,t,a),s.__e=s.__=null,t.__e!=n&&$i(t)));ze.__r=0}function Hi(i,e,t,s,n,r,a,l,h,u,c){var d,f,m,b,C,v,g,y=s&&s.__k||zi,F=e.length;for(h=Ls(t,e,y,h,F),d=0;d<F;d++)(m=t.__k[d])!=null&&(f=m.__i==-1?_e:y[m.__i]||_e,m.__i=d,v=kt(i,m,f,n,r,a,l,h,u,c),b=m.__e,m.ref&&f.ref!=m.ref&&(f.ref&&Dt(f.ref,null,m),c.push(m.ref,m.__c||b,m)),C==null&&b!=null&&(C=b),(g=!!(4&m.__u))||f.__k===m.__k?h=Vi(m,h,i,g):typeof m.type=="function"&&v!==void 0?h=v:b&&(h=b.nextSibling),m.__u&=-7);return t.__e=C,h}function Ls(i,e,t,s,n){var r,a,l,h,u,c=t.length,d=c,f=0;for(i.__k=new Array(n),r=0;r<n;r++)(a=e[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(h=r+f,(a=i.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ve(null,a,null,null,null):De(a)?ve(Y,{children:a},null,null,null):a.constructor==null&&a.__b>0?ve(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=i,a.__b=i.__b+1,l=null,(u=a.__i=Rs(a,t,h,d))!=-1&&(d--,(l=t[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(n>c?f--:n<c&&f++),typeof a.type!="function"&&(a.__u|=4)):u!=h&&(u==h-1?f--:u==h+1?f++:(u>h?f--:f++,a.__u|=4))):i.__k[r]=null;if(d)for(r=0;r<c;r++)(l=t[r])!=null&&!(2&l.__u)&&(l.__e==s&&(s=ce(l)),ji(l,l));return s}function Vi(i,e,t,s){var n,r;if(typeof i.type=="function"){for(n=i.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=i,e=Vi(n[r],e,t,s));return e}i.__e!=e&&(s&&(e&&i.type&&!e.parentNode&&(e=ce(i)),t.insertBefore(i.__e,e||null)),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Q(i,e){return e=e||[],i==null||typeof i=="boolean"||(De(i)?i.some(function(t){Q(t,e)}):e.push(i)),e}function Rs(i,e,t,s){var n,r,a,l=i.key,h=i.type,u=e[t],c=u!=null&&(2&u.__u)==0;if(u===null&&i.key==null||c&&l==u.key&&h==u.type)return t;if(s>(c?1:0)){for(n=t-1,r=t+1;n>=0||r<e.length;)if((u=e[a=n>=0?n--:r++])!=null&&!(2&u.__u)&&l==u.key&&h==u.type)return a}return-1}function Qt(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||Us.test(e)?t:t+"px"}function Ee(i,e,t,s,n){var r,a;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof s=="string"&&(i.style.cssText=s=""),s)for(e in s)t&&e in t||Qt(i.style,e,"");if(t)for(e in t)s&&t[e]==s[e]||Qt(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(xi,"$1")),a=e.toLowerCase(),e=a in i||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+r]=t,t?s?t.u=s.u:(t.u=St,i.addEventListener(e,r?ft:pt,r)):i.removeEventListener(e,r?ft:pt,r);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function Jt(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=St++;else if(e.t<t.u)return;return t(P.event?P.event(e):e)}}}function kt(i,e,t,s,n,r,a,l,h,u){var c,d,f,m,b,C,v,g,y,F,k,M,w,K,T,U,$,O=e.type;if(e.constructor!=null)return null;128&t.__u&&(h=!!(32&t.__u),r=[l=e.__e=t.__e]),(c=P.__b)&&c(e);e:if(typeof O=="function")try{if(g=e.props,y="prototype"in O&&O.prototype.render,F=(c=O.contextType)&&s[c.__c],k=c?F?F.props.value:c.__:s,t.__c?v=(d=e.__c=t.__c).__=d.__E:(y?e.__c=d=new O(g,k):(e.__c=d=new G(g,k),d.constructor=O,d.render=zs),F&&F.sub(d),d.props=g,d.state||(d.state={}),d.context=k,d.__n=s,f=d.__d=!0,d.__h=[],d._sb=[]),y&&d.__s==null&&(d.__s=d.state),y&&O.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=j({},d.__s)),j(d.__s,O.getDerivedStateFromProps(g,d.__s))),m=d.props,b=d.state,d.__v=e,f)y&&O.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),y&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(y&&O.getDerivedStateFromProps==null&&g!==m&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(g,k),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(g,d.__s,k)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=g,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(H){H&&(H.__=e)}),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(g,d.__s,k),y&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(m,b,C)})}if(d.context=k,d.props=g,d.__P=i,d.__e=!1,w=P.__r,K=0,y){for(d.state=d.__s,d.__d=!1,w&&w(e),c=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do d.__d=!1,w&&w(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++K<25);d.state=d.__s,d.getChildContext!=null&&(s=j(j({},s),d.getChildContext())),y&&!f&&d.getSnapshotBeforeUpdate!=null&&(C=d.getSnapshotBeforeUpdate(m,b)),U=c,c!=null&&c.type===Y&&c.key==null&&(U=Wi(c.props.children)),l=Hi(i,De(U)?U:[U],e,t,s,n,r,a,l,h,u),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),v&&(d.__E=d.__=null)}catch(H){if(e.__v=null,h||r!=null)if(H.then){for(e.__u|=h?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;r[r.indexOf(l)]=null,e.__e=l}else{for($=r.length;$--;)Tt(r[$]);mt(e)}else e.__e=t.__e,e.__k=t.__k,H.then||mt(e);P.__e(H,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=xs(t.__e,e,t,s,n,r,a,h,u);return(c=P.diffed)&&c(e),128&e.__u?void 0:l}function mt(i){i&&i.__c&&(i.__c.__e=!0),i&&i.__k&&i.__k.forEach(mt)}function qi(i,e,t){for(var s=0;s<t.length;s++)Dt(t[s],t[++s],t[++s]);P.__c&&P.__c(e,i),i.some(function(n){try{i=n.__h,n.__h=[],i.some(function(r){r.call(n)})}catch(r){P.__e(r,n.__v)}})}function Wi(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:De(i)?i.map(Wi):j({},i)}function xs(i,e,t,s,n,r,a,l,h){var u,c,d,f,m,b,C,v=t.props,g=e.props,y=e.type;if(y=="svg"?n="http://www.w3.org/2000/svg":y=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),r!=null){for(u=0;u<r.length;u++)if((m=r[u])&&"setAttribute"in m==!!y&&(y?m.localName==y:m.nodeType==3)){i=m,r[u]=null;break}}if(i==null){if(y==null)return document.createTextNode(g);i=document.createElementNS(n,y,g.is&&g),l&&(P.__m&&P.__m(e,r),l=!1),r=null}if(y==null)v===g||l&&i.data==g||(i.data=g);else{if(r=r&&ke.call(i.childNodes),v=t.props||_e,!l&&r!=null)for(v={},u=0;u<i.attributes.length;u++)v[(m=i.attributes[u]).name]=m.value;for(u in v)if(m=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=m;else if(!(u in g)){if(u=="value"&&"defaultValue"in g||u=="checked"&&"defaultChecked"in g)continue;Ee(i,u,null,m,n)}}for(u in g)m=g[u],u=="children"?f=m:u=="dangerouslySetInnerHTML"?c=m:u=="value"?b=m:u=="checked"?C=m:l&&typeof m!="function"||v[u]===m||Ee(i,u,m,v[u],n);if(c)l||d&&(c.__html==d.__html||c.__html==i.innerHTML)||(i.innerHTML=c.__html),e.__k=[];else if(d&&(i.innerHTML=""),Hi(e.type=="template"?i.content:i,De(f)?f:[f],e,t,s,y=="foreignObject"?"http://www.w3.org/1999/xhtml":n,r,a,r?r[0]:t.__k&&ce(t,0),l,h),r!=null)for(u=r.length;u--;)Tt(r[u]);l||(u="value",y=="progress"&&b==null?i.removeAttribute("value"):b!=null&&(b!==i[u]||y=="progress"&&!b||y=="option"&&b!=v[u])&&Ee(i,u,b,v[u],n),u="checked",C!=null&&C!=i[u]&&Ee(i,u,C,v[u],n))}return i}function Dt(i,e,t){try{if(typeof i=="function"){var s=typeof i.__u=="function";s&&i.__u(),s&&e==null||(i.__u=i(e))}else i.current=e}catch(n){P.__e(n,t)}}function ji(i,e,t){var s,n;if(P.unmount&&P.unmount(i),(s=i.ref)&&(s.current&&s.current!=i.__e||Dt(s,null,e)),(s=i.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(r){P.__e(r,e)}s.base=s.__P=null}if(s=i.__k)for(n=0;n<s.length;n++)s[n]&&ji(s[n],e,t||typeof i.type!="function");t||Tt(i.__e),i.__c=i.__=i.__e=void 0}function zs(i,e,t){return this.constructor(i,t)}function Zt(i,e,t){var s,n,r,a;e==document&&(e=document.documentElement),P.__&&P.__(i,e),n=(s=typeof t=="function")?null:e.__k,r=[],a=[],kt(e,i=(!s&&t||e).__k=Pt(Y,null,[i]),n||_e,_e,e.namespaceURI,!s&&t?[t]:n?null:e.firstChild?ke.call(e.childNodes):null,r,!s&&t?t:n?n.__e:e.firstChild,s,a),qi(r,i,a)}function Gi(i,e,t){var s,n,r,a,l=j({},i.props);for(r in i.type&&i.type.defaultProps&&(a=i.type.defaultProps),e)r=="key"?s=e[r]:r=="ref"?n=e[r]:l[r]=e[r]===void 0&&a!=null?a[r]:e[r];return arguments.length>2&&(l.children=arguments.length>3?ke.call(arguments,2):t),ve(i.type,l,s||i.key,n||i.ref,null)}ke=zi.slice,P={__e:function(i,e,t,s){for(var n,r,a;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(i)),a=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(i,s||{}),a=n.__d),a)return n.__E=n}catch(l){i=l}throw i}},Mi=0,G.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=j({},this.state),typeof i=="function"&&(i=i(j({},t),this.props)),i&&j(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),Yt(this))},G.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Yt(this))},G.prototype.render=Y,te=[],Li=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ri=function(i,e){return i.__v.__b-e.__v.__b},ze.__r=0,xi=/(PointerCapture)$|Capture$/i,St=0,pt=Jt(!1),ft=Jt(!0);var $s=0;function o(i,e,t,s,n,r){e||(e={});var a,l,h=e;if("ref"in h)for(l in h={},e)l=="ref"?a=e[l]:h[l]=e[l];var u={type:i,props:h,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$s,__i:-1,__u:0,__source:n,__self:r};if(typeof i=="function"&&(a=i.defaultProps))for(l in a)h[l]===void 0&&(h[l]=a[l]);return P.vnode&&P.vnode(u),u}var we,D,it,ei,Fe=0,Ki=[],E=P,ti=E.__b,ii=E.__r,si=E.diffed,ni=E.__c,ri=E.unmount,ai=E.__;function At(i,e){E.__h&&E.__h(D,i,Fe||e),Fe=0;var t=D.__H||(D.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({}),t.__[i]}function pe(i){return Fe=1,Hs(Yi,i)}function Hs(i,e,t){var s=At(we++,2);if(s.t=i,!s.__c&&(s.__=[Yi(void 0,e),function(l){var h=s.__N?s.__N[0]:s.__[0],u=s.t(h,l);h!==u&&(s.__N=[u,s.__[1]],s.__c.setState({}))}],s.__c=D,!D.__f)){var n=function(l,h,u){if(!s.__c.__H)return!0;var c=s.__c.__H.__.filter(function(f){return!!f.__c});if(c.every(function(f){return!f.__N}))return!r||r.call(this,l,h,u);var d=s.__c.props!==l;return c.forEach(function(f){if(f.__N){var m=f.__[0];f.__=f.__N,f.__N=void 0,m!==f.__[0]&&(d=!0)}}),r&&r.call(this,l,h,u)||d};D.__f=!0;var r=D.shouldComponentUpdate,a=D.componentWillUpdate;D.componentWillUpdate=function(l,h,u){if(this.__e){var c=r;r=void 0,n(l,h,u),r=c}a&&a.call(this,l,h,u)},D.shouldComponentUpdate=n}return s.__N||s.__}function $e(i,e){var t=At(we++,3);!E.__s&&Xi(t.__H,e)&&(t.__=i,t.u=e,D.__H.__h.push(t))}function le(i){return Fe=5,Et(function(){return{current:i}},[])}function Et(i,e){var t=At(we++,7);return Xi(t.__H,e)&&(t.__=i(),t.__H=e,t.__h=i),t.__}function He(i,e){return Fe=8,Et(function(){return i},e)}function Vs(){for(var i;i=Ki.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(xe),i.__H.__h.forEach(gt),i.__H.__h=[]}catch(e){i.__H.__h=[],E.__e(e,i.__v)}}E.__b=function(i){D=null,ti&&ti(i)},E.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),ai&&ai(i,e)},E.__r=function(i){ii&&ii(i),we=0;var e=(D=i.__c).__H;e&&(it===D?(e.__h=[],D.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(xe),e.__h.forEach(gt),e.__h=[],we=0)),it=D},E.diffed=function(i){si&&si(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Ki.push(e)!==1&&ei===E.requestAnimationFrame||((ei=E.requestAnimationFrame)||qs)(Vs)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),it=D=null},E.__c=function(i,e){e.some(function(t){try{t.__h.forEach(xe),t.__h=t.__h.filter(function(s){return!s.__||gt(s)})}catch(s){e.some(function(n){n.__h&&(n.__h=[])}),e=[],E.__e(s,t.__v)}}),ni&&ni(i,e)},E.unmount=function(i){ri&&ri(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{xe(s)}catch(n){e=n}}),t.__H=void 0,e&&E.__e(e,t.__v))};var oi=typeof requestAnimationFrame=="function";function qs(i){var e,t=function(){clearTimeout(s),oi&&cancelAnimationFrame(e),setTimeout(i)},s=setTimeout(t,35);oi&&(e=requestAnimationFrame(t))}function xe(i){var e=D,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),D=e}function gt(i){var e=D;i.__c=i.__(),D=e}function Xi(i,e){return!i||i.length!==e.length||e.some(function(t,s){return t!==i[s]})}function Yi(i,e){return typeof e=="function"?e(i):e}const Ws={position:"relative",width:"100%",minHeight:"100%"},js={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};function Gs({data:i,rowHeight:e,renderRow:t,overscanCount:s=10,padding:n=4,...r}){const a=le(null),[l,h]=pe(0),[u,c]=pe(0);$e(()=>{function y(){a.current!=null&&u!==a.current.offsetHeight&&c(a.current.offsetHeight)}return y(),window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}},[u]);const d=He(()=>{a.current&&h(a.current.scrollTop)},[]);let f=Math.floor(l/e),m=Math.floor(u/e);s&&(f=Math.max(0,f-f%s),m+=s);const b=f+m+n,C=i.slice(f,b),v={...Ws,height:i.length*e},g={...js,top:f*e};return o("div",{onScroll:d,ref:a,...r,children:o("div",{role:"presentation",style:v,children:o("div",{role:"presentation",style:g,children:C.map(t)})})})}function Ks(i){let e=null,t;return(...s)=>(t=s,e||(e=Promise.resolve().then(()=>(e=null,i(...t)))),e)}var Se;const We=class We extends Fs{constructor(){super(...arguments);A(this,Se);p(this,"isTargetDOMEl");p(this,"el");p(this,"parent");p(this,"title")}getTargetPlugin(t){let s;if(typeof(t==null?void 0:t.addTarget)=="function")s=t,s instanceof We||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:s,UIPlugin:We}}));else if(typeof t=="function"){const n=t;this.uppy.iteratePlugins(r=>{r instanceof n&&(s=r)})}return s}mount(t,s){const n=s.id,r=ks(t);if(r){this.isTargetDOMEl=!0;const h=document.createElement("div");return h.classList.add("uppy-Root"),B(this,Se,Ks(u=>{this.uppy.getPlugin(this.id)&&(Zt(this.render(u,h),h),this.afterUpdate())})),this.uppy.log(`Installing ${n} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),Zt(this.render(this.uppy.getState(),h),h),this.el=h,r.appendChild(h),h.dir=this.opts.direction||Os(h)||"ltr",this.onMount(),this.el}const a=this.getTargetPlugin(t);if(a)return this.uppy.log(`Installing ${n} to ${a.id}`),this.parent=a,this.el=a.addTarget(s),this.onMount(),this.el;this.uppy.log(`Not installing ${n}`);let l=`Invalid target option given to ${n}.`;throw typeof t=="function"?l+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":l+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(l)}render(t,s){throw new Error("Extend the render method to add your plugin to a DOM element")}update(t){var s;this.el!=null&&((s=_(this,Se))==null||s.call(this,t))}unmount(){var t;this.isTargetDOMEl&&((t=this.el)==null||t.remove()),this.onUnmount()}onMount(){}onUnmount(){}};Se=new WeakMap;let Ve=We;var Qi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var r="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(r=n(r,s(l)))}return r}function s(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var l in r)e.call(r,l)&&r[l]&&(a=n(a,l));return a}function n(r,a){return a?r?r+" "+a:r+a:r}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(Qi);var Xs=Qi.exports;const z=Ss(Xs);function Ys(){return o("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:o("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function S(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var Ji=typeof self<"u"?self:global;const Ce=typeof navigator<"u",Qs=Ce&&typeof HTMLImageElement>"u",li=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Zi=Ji.Buffer,es=!!Zi,Js=i=>i!==void 0;function ts(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(Js).length===0)}function I(i){let e=new Error(i);throw delete e.stack,e}function di(i){let e=function(t){let s=0;return t.ifd0.enabled&&(s+=1024),t.exif.enabled&&(s+=2048),t.makerNote&&(s+=2048),t.userComment&&(s+=1024),t.gps.enabled&&(s+=512),t.interop.enabled&&(s+=100),t.ifd1.enabled&&(s+=1024),s+2048}(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}const st=i=>String.fromCharCode.apply(null,i),ui=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class x{static from(e,t){return e instanceof this&&e.le===t?e:new x(e,void 0,void 0,t)}constructor(e,t=0,s,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){s===void 0&&(s=e.byteLength-t);let r=new DataView(e,t,s);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof x){s===void 0&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&I("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,s);this._swapDataView(r)}else if(typeof e=="number"){let r=new DataView(new ArrayBuffer(e));this._swapDataView(r)}else I("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=x){return e instanceof DataView||e instanceof x?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||I("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new x(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),ui?ui.decode(n):es?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(st(n)));var n}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return st(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)s.push(this.getUint16(e+n));return st(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function yt(i,e){I(`${i} '${e}' was not loaded, try using full build of exifr.`)}class Ot extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||yt(this.kind,e),t&&(e in t||function(s,n){I(`Unknown ${s} '${n}'.`)}(this.kind,e),t[e].enabled||yt(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var is=new Ot("file parser"),R=new Ot("segment parser"),Nt=new Ot("file reader");let Zs=Ji.fetch;function hi(i,e){return(t=i).startsWith("data:")||t.length>1e4?vt(i,e,"base64"):li&&i.includes("://")?bt(i,e,"url",ci):li?vt(i,e,"fs"):Ce?bt(i,e,"url",ci):void I("Invalid input argument");var t}async function bt(i,e,t,s){return Nt.has(t)?vt(i,e,t):s?async function(n,r){let a=await r(n);return new x(a)}(i,s):void I(`Parser ${t} is not loaded`)}async function vt(i,e,t){let s=new(Nt.get(t))(i,e);return await s.read(),s}const ci=i=>Zs(i).then(e=>e.arrayBuffer()),_t=i=>new Promise((e,t)=>{let s=new FileReader;s.onloadend=()=>e(s.result||new ArrayBuffer),s.onerror=t,s.readAsArrayBuffer(i)}),It=new Map,en=new Map,tn=new Map,Oe=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ss=["jfif","xmp","icc","iptc","ihdr"],wt=["tiff",...ss],N=["ifd0","ifd1","exif","gps","interop"],Ne=[...wt,...N],Ie=["makerNote","userComment"],ns=["translateKeys","translateValues","reviveValues","multiSegment"],Be=[...ns,"sanitize","mergeOutput","silentErrors"];class rs{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class fe extends rs{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,s,n){if(super(),S(this,"enabled",!1),S(this,"skip",new Set),S(this,"pick",new Set),S(this,"deps",new Set),S(this,"translateKeys",!1),S(this,"translateValues",!1),S(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=N.includes(e),this.canBeFiltered&&(this.dict=It.get(e)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:r,skip:a}=s;r&&r.length>0&&this.translateTagSet(r,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:I(`Invalid options argument: ${s}`)}applyInheritables(e){let t,s;for(t of ns)s=e[t],s!==void 0&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,n,{tagKeys:r,tagValues:a}=this.dict;for(s of e)typeof s=="string"?(n=a.indexOf(s),n===-1&&(n=r.indexOf(Number(s))),n!==-1&&t.add(Number(r[n]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,qe(this.pick,this.deps)):this.enabled&&this.pick.size>0&&qe(this.pick,this.deps)}}var L={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},pi=new Map;class Bt extends rs{static useCached(e){let t=pi.get(e);return t!==void 0||(t=new this(e),pi.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):I(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Ce?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Oe)this[e]=L[e];for(e of Be)this[e]=L[e];for(e of Ie)this[e]=L[e];for(e of Ne)this[e]=new fe(e,L[e],void 0,this)}setupFromTrue(){let e;for(e of Oe)this[e]=L[e];for(e of Be)this[e]=L[e];for(e of Ie)this[e]=!0;for(e of Ne)this[e]=new fe(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Oe)this[t]=L[t];for(t of Be)this[t]=L[t];for(t of Ie)this[t]=L[t];for(t of Ne)this[t]=new fe(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,N)}setupFromObject(e){let t;for(t of(N.ifd0=N.ifd0||N.image,N.ifd1=N.ifd1||N.thumbnail,Object.assign(this,e),Oe))this[t]=nt(e[t],L[t]);for(t of Be)this[t]=nt(e[t],L[t]);for(t of Ie)this[t]=nt(e[t],L[t]);for(t of wt)this[t]=new fe(t,L[t],e[t],this);for(t of N)this[t]=new fe(t,L[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,N,Ne),e.tiff===!0?this.batchEnableWithBool(N,!0):e.tiff===!1?this.batchEnableWithUserValue(N,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,N):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,N)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let n=t[s];this[s].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,s,n=s){if(e&&e.length){for(let a of n)this[a].enabled=!1;let r=fi(e,s);for(let[a,l]of r)qe(this[a].pick,l),this[a].enabled=!0}else if(t&&t.length){let r=fi(t,s);for(let[a,l]of r)qe(this[a].skip,l)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:n,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=N.some(r=>this[r].enabled===!0)||this.makerNote||this.userComment;for(let r of N)this[r].finalizeFilters()}get onlyTiff(){return!ss.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of wt)this[e].enabled&&!R.has(e)&&yt("segment parser",e)}}function fi(i,e){let t,s,n,r,a=[];for(n of e){for(r of(t=It.get(n),s=[],t))(i.includes(r[0])||i.includes(r[1]))&&s.push(r[0]);s.length&&a.push([n,s])}return a}function nt(i,e){return i!==void 0?i:e!==void 0?e:void 0}function qe(i,e){for(let t of e)i.add(t)}S(Bt,"default",L);class sn{constructor(e){S(this,"parsers",{}),S(this,"output",{}),S(this,"errors",[]),S(this,"pushToErrors",t=>this.errors.push(t)),this.options=Bt.useCached(e)}async read(e){this.file=await function(t,s){return typeof t=="string"?hi(t,s):Ce&&!Qs&&t instanceof HTMLImageElement?hi(t.src,s):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new x(t):Ce&&t instanceof Blob?bt(t,s,"blob",_t):void I("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,n]of is)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),I("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),ts(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async s=>{let n=await s.parse();s.assignToOutput(e,n)});this.options.silentErrors&&(t=t.map(s=>s.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=R.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let r=await this.fileParser.ensureSegmentChunk(n),a=this.parsers.tiff=new s(r,e,t),l=await a.extractThumbnail();return t.close&&t.close(),l}}class oe{static findPosition(e,t){let s=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,s):this.headerLength,r=t+n,a=s-n;return{offset:t,length:s,headerLength:n,start:r,size:a,end:r+a}}static parse(e,t={}){return new this(e,new Bt({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof x?e:new x(e)}constructor(e,t={},s){S(this,"errors",[]),S(this,"raw",new Map),S(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=tn.get(t),n=en.get(t),r=It.get(t),a=this.options[t],l=a.reviveValues&&!!s,h=a.translateValues&&!!n,u=a.translateKeys&&!!r,c={};for(let[d,f]of e)l&&s.has(d)?f=s.get(d)(f):h&&n.has(d)&&(f=this.translateValue(f,n.get(d))),u&&r.has(d)&&(d=r.get(d)||d),c[d]=f;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}S(oe,"headerLength",4),S(oe,"type",void 0),S(oe,"multiSegment",!1),S(oe,"canHandle",()=>!1);function nn(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function rn(i){return i>=224&&i<=239}function an(i,e,t){for(let[s,n]of R)if(n.canHandle(i,e,t))return s}class mi extends class{constructor(e,t,s){S(this,"errors",[]),S(this,"ensureSegmentChunk",async n=>{let r=n.start,a=n.size||65536;if(this.file.chunked)if(this.file.available(r,a))n.chunk=this.file.subarray(r,a);else try{n.chunk=await this.file.readChunk(r,a)}catch(l){I(`Couldn't read segment: ${JSON.stringify(n)}. ${l.message}`)}else this.file.byteLength>r+a?n.chunk=this.file.subarray(r,a):n.size===void 0?n.chunk=this.file.subarray(r):I("Segment unreachable: "+JSON.stringify(n));return n.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=s}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(R.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:s,chunk:n}=t,r=this.options[s];if(r&&r.enabled){let a=this.parsers[s];a&&a.append||a||this.createParser(s,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),S(this,"appSegments",[]),S(this,"jpegSegments",[]),S(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(R.keyList())):(e=e===void 0?R.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&R.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:n,wanted:r,remaining:a}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some(l=>{let h=R.get(l),u=this.options[l];return h.multiSegment&&u.multiSegment}),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let l=!1;for(;a.size>0&&!l&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:h}=s,u=this.appSegments.some(c=>!this.file.available(c.offset||c.start,c.length||c.size));if(l=e>h&&!u?!await s.readNextChunk(e):!await s.readNextChunk(h),(e=this.findAppSegmentsInRange(e,s.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let s,n,r,a,l,h,{file:u,findAll:c,wanted:d,remaining:f,options:m}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(s=u.getUint8(e+1),rn(s)){if(n=u.getUint16(e+2),r=an(u,e,n),r&&d.has(r)&&(a=R.get(r),l=a.findPosition(u,e),h=m[r],l.type=r,this.appSegments.push(l),!c&&(a.multiSegment&&h.multiSegment?(this.unfinishedMultiSegment=l.chunkNumber<l.chunkCount,this.unfinishedMultiSegment||f.delete(r)):f.delete(r),f.size===0)))break;m.recordUnknownSegments&&(l=oe.findPosition(u,e),l.marker=s,this.unknownSegments.push(l)),e+=n+1}else if(nn(s)){if(n=u.getUint16(e+2),s===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:s}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,s){let n,r,a,l=new Map;for(let h=0;h<t.length;h++)n=t[h],r=n[s],l.has(r)?a=l.get(r):l.set(r,a=[]),a.push(n);return Array.from(l)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,s])=>{let n=R.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(s)}:s[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}S(mi,"type","jpeg"),is.set("jpeg",mi);const on=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class ln extends oe{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:n,skip:r}=this.options[t];n=new Set(n);let a=n.size>0,l=r.size===0,h=this.chunk.getUint16(e);e+=2;for(let u=0;u<h;u++){let c=this.chunk.getUint16(e);if(a){if(n.has(c)&&(s.set(c,this.parseTag(e,c,t)),n.delete(c),n.size===0))break}else!l&&r.has(c)||s.set(c,this.parseTag(e,c,t));e+=12}return s}parseTag(e,t,s){let{chunk:n}=this,r=n.getUint16(e+2),a=n.getUint32(e+4),l=on[r];if(l*a<=4?e+=8:e=n.getUint32(e+8),(r<1||r>13)&&I(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e}`),e>n.byteLength&&I(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e} is outside of chunk size ${n.byteLength}`),r===1)return n.getUint8Array(e,a);if(r===2)return(h=function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u}(h=n.getString(e,a)).trim())===""?void 0:h;var h;if(r===7)return n.getUint8Array(e,a);if(a===1)return this.parseTagValue(r,e);{let u=new(function(d){switch(d){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(r))(a),c=l;for(let d=0;d<a;d++)u[d]=this.parseTagValue(r,e),e+=c;return u}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:I(`Invalid tiff type ${e}`)}}}class rt extends ln{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&I("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&I(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,di(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,di(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&s.length===1&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",gi(...e.get(2),e.get(1))),e.set("longitude",gi(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,n={};for(t of N)if(e=this[t],!ts(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,s)}else n[t]=s;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,n]of Object.entries(t))this.assignObjectToOutput(e,s,n)}}function gi(i,e,t,s){var n=i+e/60+t/3600;return s!=="S"&&s!=="W"||(n*=-1),n}S(rt,"type","tiff"),S(rt,"headerLength",10),R.set("tiff",rt);const Ut={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Ut,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Ut,{tiff:!1,ifd1:!0,mergeOutput:!1});const dn=Object.assign({},Ut,{firstChunkSize:4e4,ifd0:[274]});async function un(i){let e=new sn(dn);await e.read(i);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const hn=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,ye=!0;if(typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,s]=e;ge=Number(t)+.1*Number(s)<13.4,ye=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);ge=ye=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);ge=ye=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);ge=ye=Number(e)<77}}async function cn(i){let e=await un(i);return Object.assign({canvas:ge,css:ye},hn[e])}class pn extends x{constructor(...e){super(...e),S(this,"ranges",new fn),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(e===0&&this.byteLength===0&&s){let n=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:r}=this._extend(n);this._swapDataView(r)}}}_extend(e){let t;t=es?Zi.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class fn{constructor(){S(this,"list",[])}get length(){return this.list.length}add(e,t,s=0){let n=e+t,r=this.list.filter(a=>yi(e,a.offset,n)||yi(e,a.end,n));if(r.length>0){e=Math.min(e,...r.map(l=>l.offset)),n=Math.max(n,...r.map(l=>l.end)),t=n-e;let a=r.shift();a.offset=e,a.length=t,a.end=n,this.list=this.list.filter(l=>!r.includes(l))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let s=e+t;return this.list.some(n=>n.offset<=e&&s<=n.end)}}function yi(i,e,t){return i<=e&&e<=t}class mn extends pn{constructor(e,t){super(0),S(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Nt.set("blob",class extends mn{async readWhole(){this.chunked=!1;let i=await _t(this.input);this._swapArrayBuffer(i)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(i,e){let t=e?i+e:void 0,s=this.input.slice(i,t),n=await _t(s);return this.set(n,i,!0)}});const gn="@uppy/thumbnail-generator",yn="Uppy plugin that generates small previews of images to show on your upload UI.",bn="5.0.2",vn="MIT",_n="module",wn=!1,Fn={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Cn=["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],Sn="https://uppy.io",Tn={url:"https://github.com/transloadit/uppy/issues"},Pn={type:"git",url:"git+https://github.com/transloadit/uppy.git"},kn=["src","lib","dist","CHANGELOG.md"],Dn={".":"./lib/index.js","./package.json":"./package.json"},An={"@uppy/utils":"^7.1.1",exifr:"^7.0.0"},En={jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},On={"@uppy/core":"^5.1.1"},Nn={name:gn,description:yn,version:bn,license:vn,type:_n,sideEffects:wn,scripts:Fn,keywords:Cn,homepage:Sn,bugs:Tn,repository:Pn,files:kn,exports:Dn,dependencies:An,devDependencies:En,peerDependencies:On},In={strings:{generatingThumbnails:"Generating thumbnails..."}};function Bn(i,e,t){try{i.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return i.toBlob?new Promise(s=>{i.toBlob(s,e,t)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>Ps(i.toDataURL(e,t),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function Un(i,e){let t=i.width,s=i.height;(e.deg===90||e.deg===270)&&(t=i.height,s=i.width);const n=document.createElement("canvas");n.width=t,n.height=s;const r=n.getContext("2d");return r.translate(t/2,s/2),e.canvas&&(r.rotate(e.rad),r.scale(e.scaleX,e.scaleY)),r.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),n}function Mn(i){const e=i.width/i.height,t=5e6,s=4096;let n=Math.floor(Math.sqrt(t*e)),r=Math.floor(t/Math.sqrt(t*e));if(n>s&&(n=s,r=Math.round(n/e)),r>s&&(r=s,n=Math.round(e*r)),i.width>n){const a=document.createElement("canvas");return a.width=n,a.height=r,a.getContext("2d").drawImage(i,0,0,n,r),a}return i}const Ln={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class as extends Ve{constructor(t,s){super(t,{...Ln,...s});p(this,"queue");p(this,"queueProcessing");p(this,"defaultThumbnailDimension");p(this,"thumbnailType");p(this,"onFileAdded",t=>{!t.preview&&t.data&&Kt(t.type)&&!t.isRemote&&this.addToQueue(t.id)});p(this,"onCancelRequest",t=>{const s=this.queue.indexOf(t.id);s!==-1&&this.queue.splice(s,1)});p(this,"onFileRemoved",t=>{const s=this.queue.indexOf(t.id);s!==-1&&this.queue.splice(s,1),t.preview&&Gt(t.preview)&&URL.revokeObjectURL(t.preview)});p(this,"onRestored",()=>{this.uppy.getFiles().filter(s=>s.isRestored).forEach(s=>{(!s.preview||Gt(s.preview))&&this.addToQueue(s.id)})});p(this,"onAllFilesRemoved",()=>{this.queue=[]});p(this,"waitUntilAllProcessed",t=>{t.forEach(n=>{const r=this.uppy.getFile(n);this.uppy.emit("preprocess-progress",r,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const s=()=>{t.forEach(n=>{const r=this.uppy.getFile(n);this.uppy.emit("preprocess-complete",r)})};return new Promise(n=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{s(),n()}):(s(),n())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=In,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(t,s,n){if(t.data==null)throw new Error("File data is empty");const r=URL.createObjectURL(t.data),a=new Promise((h,u)=>{const c=new Image;c.src=r,c.addEventListener("load",()=>{URL.revokeObjectURL(r),h(c)}),c.addEventListener("error",d=>{URL.revokeObjectURL(r),u(d.error||new Error("Could not create thumbnail"))})}),l=cn(t.data).catch(()=>1);return Promise.all([a,l]).then(([h,u])=>{const c=this.getProportionalDimensions(h,s,n,u.deg),d=Un(h,u),f=this.resizeImage(d,c.width,c.height);return Bn(f,this.thumbnailType,80)}).then(h=>URL.createObjectURL(h))}getProportionalDimensions(t,s,n,r){let a=t.width/t.height;if((r===90||r===270)&&(a=t.height/t.width),s!=null){let l=s;return t.width<s&&(l=t.width),{width:l,height:Math.round(l/a)}}if(n!=null){let l=n;return t.height<n&&(l=t.height),{width:Math.round(l*a),height:l}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/a)}}resizeImage(t,s,n){let r=Mn(t),a=Math.ceil(Math.log2(r.width/s));a<1&&(a=1);let l=s*2**(a-1),h=n*2**(a-1);const u=2;for(;a--;){const c=document.createElement("canvas");c.width=l,c.height=h,c.getContext("2d").drawImage(r,0,0,l,h),r=c,l=Math.round(l/u),h=Math.round(h/u)}return r}setPreviewURL(t,s){this.uppy.setFileState(t,{preview:s})}addToQueue(t){this.queue.push(t),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(t){return Kt(t.type)&&!t.isRemote?this.createThumbnail(t,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(s=>{this.setPreviewURL(t.id,s),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${t.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(t.id),s)}).catch(s=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${t.id}:`,"warning"),this.uppy.log(s,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(t.id),s)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}p(as,"VERSION",Nn.version);let Rn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",os=(i=21)=>{let e="",t=i|0;for(;t--;)e+=Rn[Math.random()*64|0];return e};const xn="@uppy/dashboard",zn="Universal UI plugin for Uppy.",$n="5.0.4",Hn="MIT",Vn="dist/style.min.css",qn="module",Wn=["*.css"],jn={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest run --project browser"},Gn=["file uploader","uppy","uppy-plugin","dashboard","ui"],Kn="https://uppy.io",Xn={url:"https://github.com/transloadit/uppy/issues"},Yn={type:"git",url:"git+https://github.com/transloadit/uppy.git"},Qn=["src","lib","dist","CHANGELOG.md"],Jn={".":"./lib/index.js","./css/style.css":"./dist/style.css","./css/style.min.css":"./dist/style.min.css","./css/style.scss":"./src/style.scss","./package.json":"./package.json"},Zn={"@transloadit/prettier-bytes":"^0.3.4","@uppy/provider-views":"^5.1.2","@uppy/thumbnail-generator":"^5.0.2","@uppy/utils":"^7.1.3",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},er={"@uppy/core":"^5.1.1","@uppy/google-drive":"^5.0.1","@uppy/url":"^5.0.2","@uppy/webcam":"^5.0.2","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",playwright:"1.54.1",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},tr={"@uppy/core":"^5.1.1"},ir={name:xn,description:zn,version:$n,license:Hn,style:Vn,type:qn,sideEffects:Wn,scripts:jn,keywords:Gn,homepage:Kn,bugs:Xn,repository:Yn,files:Qn,exports:Jn,dependencies:Zn,devDependencies:er,peerDependencies:tr};class ls extends G{constructor(){super(...arguments);p(this,"fileInput",null);p(this,"folderInput",null);p(this,"mobilePhotoFileInput",null);p(this,"mobileVideoFileInput",null);p(this,"triggerFileInputClick",()=>{var t;(t=this.fileInput)==null||t.click()});p(this,"triggerFolderInputClick",()=>{var t;(t=this.folderInput)==null||t.click()});p(this,"triggerVideoCameraInputClick",()=>{var t;(t=this.mobileVideoFileInput)==null||t.click()});p(this,"triggerPhotoCameraInputClick",()=>{var t;(t=this.mobilePhotoFileInput)==null||t.click()});p(this,"onFileInputChange",t=>{this.props.handleInputChange(t),t.currentTarget.value=""});p(this,"renderHiddenInput",(t,s)=>{var n;return o("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:t,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(n=this.props.allowedFileTypes)==null?void 0:n.join(", "),ref:s})});p(this,"renderHiddenCameraInput",(t,s,n)=>{const a={photo:"image/*",video:"video/*"}[t];return o("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${t}`,onChange:this.onFileInputChange,capture:s===""?"environment":s,accept:a,ref:n})});p(this,"renderMyDeviceAcquirer",()=>o("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[o("div",{className:"uppy-DashboardTab-inner",children:o("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:o("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),o("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));p(this,"renderPhotoCamera",()=>o("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[o("div",{className:"uppy-DashboardTab-inner",children:o("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:o("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),o("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));p(this,"renderVideoCamera",()=>o("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[o("div",{className:"uppy-DashboardTab-inner",children:o("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:o("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),o("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));p(this,"renderBrowseButton",(t,s)=>{const n=this.props.acquirers.length;return o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:s,"data-uppy-super-focusable":n===0,children:t})});p(this,"renderDropPasteBrowseTagline",t=>{const s=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),n=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),r=this.props.fileManagerSelectionType,a=r.charAt(0).toUpperCase()+r.slice(1);return o("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):t>0?this.props.i18nArray(`dropPasteImport${a}`,{browseFiles:s,browseFolders:n,browse:s}):this.props.i18nArray(`dropPaste${a}`,{browseFiles:s,browseFolders:n,browse:s})})});p(this,"renderAcquirer",t=>{var s;return o("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":t.id,children:o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":t.id,"aria-controls":`uppy-DashboardContent-panel--${t.id}`,"aria-selected":((s=this.props.activePickerPanel)==null?void 0:s.id)===t.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(t.id),children:[o("div",{className:"uppy-DashboardTab-inner",children:t.icon()}),o("div",{className:"uppy-DashboardTab-name",children:t.name})]})})});p(this,"renderAcquirers",t=>{const s=[...t],n=s.splice(t.length-2,t.length);return o(Y,{children:[s.map(r=>this.renderAcquirer(r)),o("span",{role:"presentation",style:{"white-space":"nowrap"},children:n.map(r=>this.renderAcquirer(r))})]})});p(this,"renderSourcesList",(t,s)=>{const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:r}=this.props;let a=[];const l="myDevice";s||a.push({key:l,elements:this.renderMyDeviceAcquirer()}),n&&a.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),r&&a.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),a.push(...t.map(d=>({key:d.id,elements:this.renderAcquirer(d)}))),a.length===1&&a[0].key===l&&(a=[]);const u=[...a],c=u.splice(a.length-2,a.length);return o(Y,{children:[this.renderDropPasteBrowseTagline(a.length),o("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[u.map(({key:d,elements:f})=>o(Y,{children:f},d)),o("span",{role:"presentation",style:{"white-space":"nowrap"},children:c.map(({key:d,elements:f})=>o(Y,{children:f},d))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:t}=this.props,s=o("span",{children:[o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:o("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),o("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),n=t("poweredBy",{uppy:s});return o("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:n})}render(){const{showNativePhotoCameraButton:t,showNativeVideoCameraButton:s,nativeCameraFacingMode:n}=this.props;return o("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,r=>{this.fileInput=r}),this.renderHiddenInput(!0,r=>{this.folderInput=r}),t&&this.renderHiddenCameraInput("photo",n,r=>{this.mobilePhotoFileInput=r}),s&&this.renderHiddenCameraInput("video",n,r=>{this.mobileVideoFileInput=r}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),o("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&o("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const sr=i=>o("div",{className:z("uppy-Dashboard-AddFilesPanel",i.className),"data-uppy-panelType":"AddFiles","aria-hidden":!i.showAddFilesPanel,children:[o("div",{className:"uppy-DashboardContent-bar",children:[o("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i.i18n("addingMoreFiles")}),o("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>i.toggleAddFilesPanel(!1),children:i.i18n("back")})]}),o(ls,{...i})]});function nr(i){const e=i.files[i.fileCardFor],t=()=>{i.uppy.emit("file-editor:cancel",e),i.closeFileEditor()};return o("div",{className:z("uppy-DashboardContent-panel",i.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[o("div",{className:"uppy-DashboardContent-bar",children:[o("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i.i18nArray("editing",{file:o("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),o("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:i.i18n("cancel")}),o("button",{className:"uppy-DashboardContent-save",type:"button",onClick:i.saveFileEditor,children:i.i18n("save")})]}),o("div",{className:"uppy-DashboardContent-panelBody",children:i.editors.map(s=>i.uppy.getPlugin(s.id).render(i.state))})]})}function rr(){return o("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:o("g",{fill:"#686DE0",fillRule:"evenodd",children:[o("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),o("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),o("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function ar(){return o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:o("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function or(){return o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:o("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function lr(){return o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:o("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function dr(){return o("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:o("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function ur(){return o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:o("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[o("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),o("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function hr(){return o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:o("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function Mt(i){const e={color:"#838999",icon:ur()};if(!i)return e;const t=i.split("/")[0],s=i.split("/")[1];return t==="text"?{color:"#5a5e69",icon:hr()}:t==="image"?{color:"#686de0",icon:rr()}:t==="audio"?{color:"#068dbb",icon:ar()}:t==="video"?{color:"#19af67",icon:or()}:t==="application"&&s==="pdf"?{color:"#e25149",icon:lr()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:dr()}:e}function Z(i){const{tagName:e}=i.target;if(e==="INPUT"||e==="TEXTAREA"){i.stopPropagation();return}i.preventDefault(),i.stopPropagation()}function ds(i){const{file:e}=i;if(e.preview)return o("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:s}=Mt(e.type);return o("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[o("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:s}),o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:o("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function cr(i){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:s,form:n,formState:r}=i,a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(l=>{const h=`uppy-Dashboard-FileCard-input-${l.id}`,u=t.includes(l.id);return o("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[o("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:h,children:l.name}),l.render!==void 0?l.render({value:r[l.id],onChange:c=>s(c,l.id),fieldCSSClasses:a,required:u,form:n.id},Pt):o("input",{className:a.text,id:h,form:n.id,type:l.type||"text",required:u,value:r[l.id],placeholder:l.placeholder,onInput:c=>s(c.target.value,l.id),"data-uppy-super-focusable":!0})]},l.id)})}function pr(i){const{files:e,fileCardFor:t,toggleFileCard:s,saveFileCard:n,metaFields:r,requiredMetaFields:a,openFileEditor:l,i18n:h,i18nArray:u,className:c,canEditFile:d}=i,f=()=>typeof r=="function"?r(e[t]):r,m=e[t],b=f()??[],C=d(m),v={};b.forEach(T=>{v[T.id]=m.meta[T.id]??""});const[g,y]=pe(v),F=He(T=>{T.preventDefault(),n(g,t)},[n,g,t]),k=(T,U)=>{y({...g,[U]:T})},M=()=>{s(!1)},[w]=pe(()=>{const T=document.createElement("form");return T.setAttribute("tabindex","-1"),T.id=os(),T}),K=le(null);return $e(()=>{var U;const T=((U=K.current)==null?void 0:U.getRootNode())??document;return T instanceof Document?T.body.appendChild(w):(T instanceof ShadowRoot,T.appendChild(w)),w.addEventListener("submit",F),()=>{w.removeEventListener("submit",F),w.parentNode&&w.parentNode.removeChild(w)}},[w,F]),o("div",{className:z("uppy-Dashboard-FileCard",c),"data-uppy-panelType":"FileCard",onDragOver:Z,onDragLeave:Z,onDrop:Z,onPaste:Z,ref:K,children:[o("div",{className:"uppy-DashboardContent-bar",children:[o("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:u("editing",{file:o("span",{className:"uppy-DashboardContent-titleFile",children:m.meta?m.meta.name:m.name})})}),o("button",{className:"uppy-DashboardContent-back",type:"button",form:w.id,title:h("finishEditingFile"),onClick:M,children:h("cancel")})]}),o("div",{className:"uppy-Dashboard-FileCard-inner",children:[o("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Mt(m.type).color},children:[o(ds,{file:m}),C&&o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:T=>{F(T),l(m)},children:h("editImage")})]}),o("div",{className:"uppy-Dashboard-FileCard-info",children:o(cr,{computedMetaFields:b,requiredMetaFields:a,updateMeta:k,form:w,formState:g})}),o("div",{className:"uppy-Dashboard-FileCard-actions",children:[o("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:w.id,children:h("saveChanges")}),o("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:M,form:w.id,children:h("cancel")})]})]})]})}function fr(i,e){if(i===e)return!0;if(!i||!e)return!1;const t=Object.keys(i),s=Object.keys(e),n=t.length;if(s.length!==n)return!1;for(let r=0;r<n;r++){const a=t[r];if(i[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}function mr(i,e="Copy the URL below"){return new Promise(t=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=i,document.body.appendChild(s),s.select();const n=()=>{document.body.removeChild(s),window.prompt(e,i),t()};try{return document.execCommand("copy")?(document.body.removeChild(s),t()):n()}catch{return document.body.removeChild(s),n()}})}function gr({file:i,uploadInProgressOrComplete:e,metaFields:t,canEditFile:s,i18n:n,onClick:r}){return!e&&t&&t.length>0||!e&&s(i)?o("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":n("editFileWithFilename",{file:i.meta.name}),title:n("editFileWithFilename",{file:i.meta.name}),onClick:()=>r(),children:o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:o("g",{fillRule:"evenodd",children:[o("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),o("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),o("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function yr({i18n:i,onClick:e,file:t}){return o("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":i("removeFile",{file:t.meta.name}),title:i("removeFile",{file:t.meta.name}),onClick:()=>e(),children:o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[o("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),o("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function br({file:i,uppy:e,i18n:t}){const s=n=>{mr(i.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>n.target.focus({preventScroll:!0}))};return o("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:n=>s(n),children:o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:o("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function vr(i){const{uppy:e,file:t,uploadInProgressOrComplete:s,canEditFile:n,metaFields:r,showLinkToFileUploadResult:a,showRemoveButton:l,i18n:h,toggleFileCard:u,openFileEditor:c}=i;return o("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[o(gr,{i18n:h,file:t,uploadInProgressOrComplete:s,canEditFile:n,metaFields:r,onClick:()=>{r&&r.length>0?u(!0,t.id):c(t)}}),a&&t.uploadURL?o(br,{file:t,uppy:e,i18n:h}):null,l?o(yr,{i18n:h,file:t,onClick:()=>e.removeFile(t.id)}):null]})}const _r=(i,e)=>(typeof e=="function"?e():e).filter(n=>n.id===i)[0].name;function us(i){const{file:e,toggleFileCard:t,i18n:s,metaFields:n}=i,{missingRequiredMetaFields:r}=e;if(!(r!=null&&r.length))return null;const a=r.map(l=>_r(l,n)).join(", ");return o("div",{className:"uppy-Dashboard-Item-errorMessage",children:[s("missingRequiredMetaFields",{smart_count:r.length,fields:a})," ",o("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:s("editFile")})]})}const wr=i=>{const{author:e,name:t}=i.file.meta;function s(){return i.isSingleFile&&i.containerHeight>=350?90:i.containerWidth<=352?35:i.containerWidth<=576?60:e?20:30}return o("div",{className:"uppy-Dashboard-Item-name",title:t,children:Ui(t,s())})},Fr=i=>{var n;const{author:e}=i.file.meta,t="remote"in i.file?(n=i.file.remote)==null?void 0:n.providerName:void 0,s="Â·";return e?o("div",{className:"uppy-Dashboard-Item-author",children:[o("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:Ui(e.name,13)}),t?o(Y,{children:[` ${s} `,t,` ${s} `]}):null]}):null},Cr=i=>i.file.size&&o("div",{className:"uppy-Dashboard-Item-statusSize",children:ct(i.file.size)}),Sr=i=>i.file.isGhost&&o("span",{children:[" â€¢ ",o("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>i.toggleAddFilesPanel(!0),children:i.i18n("reSelect")})]}),Tr=({file:i,onClick:e})=>i.error?o("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":i.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function Pr(i){const{file:e,i18n:t,toggleFileCard:s,metaFields:n,toggleAddFilesPanel:r,isSingleFile:a,containerHeight:l,containerWidth:h}=i;return o("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[o("div",{className:"uppy-Dashboard-Item-fileName",children:[wr({file:e,isSingleFile:a,containerHeight:l,containerWidth:h}),o(Tr,{file:e,onClick:()=>alert(e.error)})]}),o("div",{className:"uppy-Dashboard-Item-status",children:[Fr({file:e}),Cr({file:e}),Sr({file:e,toggleAddFilesPanel:r,i18n:t})]}),o(us,{file:e,i18n:t,toggleFileCard:s,metaFields:n})]})}function kr(i){const{file:e,i18n:t,toggleFileCard:s,metaFields:n,showLinkToFileUploadResult:r}=i,l=e.preview?"rgba(255, 255, 255, 0.5)":Mt(e.type).color;return o("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:l},children:[r&&e.uploadURL&&o("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:o("span",{hidden:!0,children:e.meta.name})}),o(ds,{file:e}),o(us,{file:e,i18n:t,toggleFileCard:s,metaFields:n})]})}function Dr(i){if(!i.isUploaded){if(i.error&&!i.hideRetryButton){i.uppy.retryUpload(i.file.id);return}i.resumableUploads&&!i.hidePauseResumeButton?i.uppy.pauseResume(i.file.id):i.individualCancellation&&!i.hideCancelButton&&i.uppy.removeFile(i.file.id)}}function bi(i){return i.isUploaded?i.i18n("uploadComplete"):i.error?i.i18n("retryUpload"):i.resumableUploads?i.file.isPaused?i.i18n("resumeUpload"):i.i18n("pauseUpload"):i.individualCancellation?i.i18n("cancelUpload"):""}function at(i){return o("div",{className:"uppy-Dashboard-Item-progress",children:o("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":bi(i),title:bi(i),onClick:()=>Dr(i),children:i.children})})}function Ue({children:i}){return o("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:i})}function ot({progress:i}){const e=2*Math.PI*15;return o("g",{children:[o("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),o("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*i})]})}function Ar(i){return!i.file.progress.uploadStarted||i.file.progress.percentage===void 0?null:i.isUploaded?o("div",{className:"uppy-Dashboard-Item-progress",children:o("div",{className:"uppy-Dashboard-Item-progressIndicator",children:o(Ue,{children:[o("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),o("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):i.recoveredState?null:i.error&&!i.hideRetryButton?o(at,{...i,children:o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[o("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),o("path",{d:"M7.9 3H10v2H7.9z"}),o("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),o("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):i.resumableUploads&&!i.hidePauseResumeButton?o(at,{...i,children:o(Ue,{children:[o(ot,{progress:i.file.progress.percentage}),i.file.isPaused?o("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):o("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[o("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),o("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!i.resumableUploads&&i.individualCancellation&&!i.hideCancelButton?o(at,{...i,children:o(Ue,{children:[o(ot,{progress:i.file.progress.percentage}),o("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):o("div",{className:"uppy-Dashboard-Item-progress",children:o("div",{className:"uppy-Dashboard-Item-progressIndicator",children:o(Ue,{children:o(ot,{progress:i.file.progress.percentage})})})})}class Er extends G{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!fr(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,s=!!e.progress.uploadComplete&&!t&&!e.error,n=!!e.progress.uploadStarted||!!t,r=e.progress.uploadStarted&&!e.progress.uploadComplete||t,a=e.error||!1,{isGhost:l}=e;let h=(this.props.individualCancellation||!r)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(h=!0);const u=z({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":t,"is-complete":s,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":l});return o("div",{className:u,id:`uppy_${e.id}`,role:this.props.role,children:[o("div",{className:"uppy-Dashboard-Item-preview",children:[o(kr,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),o(Ar,{uppy:this.props.uppy,file:e,error:a,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),o("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[o(Pr,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),o(vr,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:h,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function Or(i,e){const t=[];let s=[];return i.forEach(n=>{s.length<e?s.push(n):(t.push(s),s=[n])}),s.length&&t.push(s),t}function Nr({id:i,i18n:e,uppy:t,files:s,resumableUploads:n,hideRetryButton:r,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:h,showRemoveButtonAfterComplete:u,metaFields:c,isSingleFile:d,toggleFileCard:f,handleRequestThumbnail:m,handleCancelThumbnail:b,recoveredState:C,individualCancellation:v,itemsPerRow:g,openFileEditor:y,canEditFile:F,toggleAddFilesPanel:k,containerWidth:M,containerHeight:w}){const K=g===1?71:200,T=Et(()=>{const $=(H,Je)=>Number(s[Je].isGhost)-Number(s[H].isGhost),O=Object.keys(s);return C&&O.sort($),Or(O,g)},[s,g,C]),U=$=>o("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:$.map(O=>o(Er,{uppy:t,id:i,i18n:e,resumableUploads:n,individualCancellation:v,hideRetryButton:r,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:h,showRemoveButtonAfterComplete:u,metaFields:c,recoveredState:C,isSingleFile:d,containerWidth:M,containerHeight:w,toggleFileCard:f,handleRequestThumbnail:m,handleCancelThumbnail:b,role:"listitem",openFileEditor:y,canEditFile:F,toggleAddFilesPanel:k,file:s[O]},O))},$[0]);return d?o("div",{class:"uppy-Dashboard-files",children:U(T[0])}):o(Gs,{class:"uppy-Dashboard-files",role:"list",data:T,renderRow:U,rowHeight:K})}const vi=300;class Ir extends G{constructor(){super(...arguments);p(this,"ref",Ms())}componentWillEnter(t){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(t,vi)}componentWillLeave(t){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(t,vi)}render(){const{children:t}=this.props;return o("div",{className:"uppy-Informer-animated",ref:this.ref,children:t})}}function Br(i,e){return Object.assign(i,e)}function Ur(i,e){return(i==null?void 0:i.key)??e}function Mr(i,e){const t=i._ptgLinkedRefs||(i._ptgLinkedRefs={});return t[e]||(t[e]=s=>{i.refs[e]=s})}function me(i){const e={};for(let t=0;t<i.length;t++)if(i[t]!=null){const s=Ur(i[t],t.toString(36));e[s]=i[t]}return e}function Lr(i,e){i=i||{},e=e||{};const t=a=>Object.hasOwn(e,a)?e[a]:i[a],s={};let n=[];for(const a in i)Object.hasOwn(e,a)?n.length&&(s[a]=n,n=[]):n.push(a);const r={};for(const a in e){if(Object.hasOwn(s,a))for(let l=0;l<s[a].length;l++){const h=s[a][l];r[s[a][l]]=t(h)}r[a]=t(a)}for(let a=0;a<n.length;a++)r[n[a]]=t(n[a]);return r}const Rr=i=>i;class hs extends G{constructor(e,t){super(e,t),this.refs={},this.state={children:me(Q(Q(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=me(Q(e.children)||[]),s=this.state.children;this.setState(r=>({children:Lr(r.children,t)}));let n;for(n in t)if(Object.hasOwn(t,n)){const r=s&&Object.hasOwn(s,n);t[n]&&r&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):t[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in s)if(Object.hasOwn(s,n)){const r=t&&Object.hasOwn(t,n);s[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t!=null&&t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t!=null&&t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=me(Q(this.props.children)||[]);(!s||!Object.hasOwn(s,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t!=null&&t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t!=null&&t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=me(Q(this.props.children)||[]);(!s||!Object.hasOwn(s,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s!=null&&s.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const s=this.refs[e];s!=null&&s.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const n=me(Q(this.props.children)||[]);if(n&&Object.hasOwn(n,e))this.performEnter(e);else{const r=Br({},this.state.children);delete r[e],this.setState({children:r})}}render({childFactory:e,transitionLeave:t,transitionName:s,transitionAppear:n,transitionEnter:r,transitionLeaveTimeout:a,transitionEnterTimeout:l,transitionAppearTimeout:h,component:u,...c},{children:d}){const f=Object.entries(d).map(([m,b])=>{if(!b)return;const C=Mr(this,m);return Gi(e(b),{ref:C,key:m})}).filter(Boolean);return Pt(u,c,f)}}hs.defaultProps={component:"span",childFactory:Rr};class _i extends G{render(){const{info:e}=this.props.uppy.getState();return o("div",{className:"uppy uppy-Informer",children:o(hs,{children:e.map(t=>o(Ir,{children:o("p",{role:"alert",children:[t.message," ",t.details&&o("span",{"aria-label":t.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${t.message} 

 ${t.details}`),children:"?"})]})},t.message))})})}}function xr({activePickerPanel:i,className:e,hideAllPanels:t,i18n:s,state:n,uppy:r}){const a=le(null);return o("div",{className:z("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${i.id}`,onDragOver:Z,onDragLeave:Z,onDrop:Z,onPaste:Z,children:[o("div",{className:"uppy-DashboardContent-bar",children:[o("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s("importFrom",{name:i.name})}),o("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:s("cancel")})]}),o("div",{ref:a,className:"uppy-DashboardContent-panelBody",children:r.getPlugin(i.id).render(n,a.current)})]})}const V={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function zr(i,e,t,s={}){if(i)return V.STATE_ERROR;if(e)return V.STATE_COMPLETE;if(t)return V.STATE_PAUSED;let n=V.STATE_WAITING;const r=Object.keys(s);for(let a=0;a<r.length;a++){const{progress:l}=s[r[a]];if(l.uploadStarted&&!l.uploadComplete)return V.STATE_UPLOADING;l.preprocess&&n!==V.STATE_UPLOADING&&(n=V.STATE_PREPROCESSING),l.postprocess&&n!==V.STATE_UPLOADING&&n!==V.STATE_PREPROCESSING&&(n=V.STATE_POSTPROCESSING)}return n}function $r({files:i,i18n:e,isAllComplete:t,isAllErrored:s,isAllPaused:n,inProgressNotPausedFiles:r,newFiles:a,processingFiles:l}){switch(zr(s,t,n,i)){case"uploading":return e("uploadingXFiles",{smart_count:r.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:l.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:a.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function Hr(i){const{i18n:e,isAllComplete:t,hideCancelButton:s,maxNumberOfFiles:n,toggleAddFilesPanel:r,uppy:a}=i;let{allowNewUpload:l}=i;return l&&n&&(l=i.totalFileCount<i.maxNumberOfFiles),o("div",{className:"uppy-DashboardContent-bar",children:[!t&&!s?o("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>a.cancelAll(),children:e("cancel")}):o("div",{}),o("div",{className:"uppy-DashboardContent-title",children:o($r,{...i})}),l?o("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>r(!0),children:[o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:o("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),o("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):o("div",{})]})}const ae="uppy-transition-slideDownUp",wi=250;function Me({children:i}){const[e,t]=pe(null),[s,n]=pe(""),r=le(),a=le(),l=le(),h=He(()=>{n(`${ae}-enter`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{n(`${ae}-enter ${ae}-enter-active`),r.current=setTimeout(()=>{n("")},wi)})},[]),u=He(()=>{n(`${ae}-leave`),cancelAnimationFrame(l.current),clearTimeout(r.current),r.current=void 0,l.current=requestAnimationFrame(()=>{n(`${ae}-leave ${ae}-leave-active`),a.current=setTimeout(()=>{t(null),n("")},wi)})},[]);return $e(()=>{const c=Q(i)[0];e!==c&&(c&&!e?h():e&&!c&&!a.current&&u(),t(c))},[i,e,h,u]),$e(()=>()=>{clearTimeout(r.current),clearTimeout(a.current),cancelAnimationFrame(l.current)},[]),e?Gi(e,{className:z(s,e.props.className)}):null}const q={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},Vr="Â·",Fi=()=>` ${Vr} `;function qr(i){const{newFiles:e,isUploadStarted:t,recoveredState:s,i18n:n,uploadState:r,isSomeGhost:a,startUpload:l}=i,h=z("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":r===q.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":a}),u=e&&t&&!s?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return o("button",{type:"button",className:h,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:l,disabled:a,"data-uppy-super-focusable":!0,children:u})}function Wr(i){const{i18n:e,uppy:t}=i;return o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:o("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function jr(i){const{i18n:e,uppy:t}=i;return o("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:o("g",{fill:"none",fillRule:"evenodd",children:[o("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),o("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function Gr(i){const{isAllPaused:e,i18n:t,isAllComplete:s,resumableUploads:n,uppy:r}=i,a=t(e?"resume":"pause");function l(){if(!s){if(!n){r.cancelAll();return}if(e){r.resumeAll();return}r.pauseAll()}}return o("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:l,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:o("g",{fill:"none",fillRule:"evenodd",children:[o("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),o("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function Kr(i){const{i18n:e,doneButtonHandler:t}=i;return o("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function cs(){return o("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:o("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function Xr(i){const{progress:e}=i,{value:t,mode:s,message:n}=e;return o("div",{className:"uppy-StatusBar-content",children:[o(cs,{}),s==="determinate"?`${Math.round(t*100)}% Â· `:"",n]})}function Yr(i){const{numUploads:e,complete:t,totalUploadedSize:s,totalSize:n,totalETA:r,i18n:a}=i,l=e>1,h=ct(s);return o("div",{className:"uppy-StatusBar-statusSecondary",children:[l&&a("filesUploadedOfTotal",{complete:t,smart_count:e}),o("span",{className:"uppy-StatusBar-additionalInfo",children:[l&&Fi(),n!=null?a("dataUploadedOfTotal",{complete:h,total:ct(n)}):a("dataUploadedOfUnknown",{complete:h}),Fi(),r!=null&&a("xTimeLeft",{time:Bs(r)})]})]})}function ps(i){const{i18n:e,complete:t,numUploads:s}=i;return o("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:s})})}function Qr(i){const{i18n:e,newFiles:t,startUpload:s}=i,n=z("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return o("div",{className:"uppy-StatusBar-statusSecondary",children:[o("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),o("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:s,children:e("upload")})]})}function Jr(i){const{i18n:e,supportsUploadProgress:t,totalProgress:s,hideProgressDetails:n,isUploadStarted:r,isAllComplete:a,isAllPaused:l,newFiles:h,numUploads:u,complete:c,totalUploadedSize:d,totalSize:f,totalETA:m,startUpload:b}=i,C=h&&r;if(!r||a)return null;const v=e(l?"paused":"uploading");function g(){return!l&&!C&&!n?t?o(Yr,{numUploads:u,complete:c,totalUploadedSize:d,totalSize:f,totalETA:m,i18n:e}):o(ps,{i18n:e,complete:c,numUploads:u}):null}return o("div",{className:"uppy-StatusBar-content",title:v,children:[l?null:o(cs,{}),o("div",{className:"uppy-StatusBar-status",children:[o("div",{className:"uppy-StatusBar-statusPrimary",children:t&&s!==0?`${v}: ${s}%`:v}),g(),C?o(Qr,{i18n:e,newFiles:h,startUpload:b}):null]})]})}function Zr(i){const{i18n:e}=i;return o("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:o("div",{className:"uppy-StatusBar-status",children:o("div",{className:"uppy-StatusBar-statusPrimary",children:[o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:o("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function ea(i){const{error:e,i18n:t,complete:s,numUploads:n}=i;function r(){const a=`${t("uploadFailed")} 

 ${e}`;alert(a)}return o("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[o("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:o("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),o("div",{className:"uppy-StatusBar-status",children:[o("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),o("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:r,type:"button",children:"?"})]}),o(ps,{i18n:t,complete:s,numUploads:n})]})]})}function lt(i){const e=[];let t="indeterminate",s;for(const{progress:r}of Object.values(i)){const{preprocess:a,postprocess:l}=r;s==null&&(a||l)&&({mode:t,message:s}=a||l),(a==null?void 0:a.mode)==="determinate"&&e.push(a.value),(l==null?void 0:l.mode)==="determinate"&&e.push(l.value)}const n=e.reduce((r,a)=>r+a/e.length,0);return{mode:t,message:s,value:n}}const{STATE_ERROR:Ci,STATE_WAITING:ta,STATE_PREPROCESSING:dt,STATE_UPLOADING:Le,STATE_POSTPROCESSING:ut,STATE_COMPLETE:Re}=q;function ia({newFiles:i,allowNewUpload:e,isUploadInProgress:t,isAllPaused:s,resumableUploads:n,error:r,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:h=!1,hideRetryButton:u=!1,recoveredState:c,uploadState:d,totalProgress:f,files:m,supportsUploadProgress:b,hideAfterFinish:C=!1,isSomeGhost:v,doneButtonHandler:g=void 0,isUploadStarted:y,i18n:F,startUpload:k,uppy:M,isAllComplete:w,hideProgressDetails:K=void 0,numUploads:T,complete:U,totalSize:$,totalETA:O,totalUploadedSize:H}){function Je(){switch(d){case ut:case dt:{const Ae=lt(m);return Ae.mode==="determinate"?Ae.value*100:f}case Ci:return null;case Le:return b?f:null;default:return f}}function ys(){switch(d){case ut:case dt:{const{mode:Ae}=lt(m);return Ae==="indeterminate"}case Le:return!b;default:return!1}}const Lt=Je(),Ze=Lt??100,Rt=!r&&i&&(!t&&!s||c)&&e&&!a,xt=!h&&d!==ta&&d!==Re,zt=n&&!l&&d===Le,$t=r&&!w&&!u,Ht=g&&d===Re,bs=z("uppy-StatusBar-progress",{"is-indeterminate":ys()}),vs=z("uppy-StatusBar",`is-${d}`,{"has-ghosts":v}),Vt=(()=>{switch(d){case dt:case ut:return o(Xr,{progress:lt(m)});case Re:return o(Zr,{i18n:F});case Ci:return o(ea,{error:r,i18n:F,numUploads:T,complete:U});case Le:return o(Jr,{i18n:F,supportsUploadProgress:b,totalProgress:f,hideProgressDetails:K,isUploadStarted:y,isAllComplete:w,isAllPaused:s,newFiles:i,numUploads:T,complete:U,totalUploadedSize:H,totalSize:$,totalETA:O,startUpload:k});default:return null}})();return!(Rt||$t||zt||xt||Ht)&&!Vt||d===Re&&C?null:o("div",{className:vs,children:[o("div",{className:bs,style:{width:`${Ze}%`},role:"progressbar","aria-label":`${Ze}%`,"aria-valuetext":`${Ze}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Lt}),Vt,o("div",{className:"uppy-StatusBar-actions",children:[Rt?o(qr,{newFiles:i,isUploadStarted:y,recoveredState:c,i18n:F,isSomeGhost:v,startUpload:k,uploadState:d}):null,$t?o(Wr,{i18n:F,uppy:M}):null,zt?o(Gr,{isAllPaused:s,i18n:F,isAllComplete:w,resumableUploads:n,uppy:M}):null,xt?o(jr,{i18n:F,uppy:M}):null,Ht?o(Kr,{i18n:F,doneButtonHandler:g}):null]})]})}const sa=2e3,na=2e3;function ra(i,e,t,s){if(i)return q.STATE_ERROR;if(e)return q.STATE_COMPLETE;if(t)return q.STATE_WAITING;let n=q.STATE_WAITING;const r=Object.keys(s);for(let a=0;a<r.length;a++){const{progress:l}=s[r[a]];if(l.uploadStarted&&!l.uploadComplete)return q.STATE_UPLOADING;l.preprocess&&(n=q.STATE_PREPROCESSING),l.postprocess&&n!==q.STATE_PREPROCESSING&&(n=q.STATE_POSTPROCESSING)}return n}var J,W,ie,X,Te,je,fs;class aa extends G{constructor(){super(...arguments);A(this,je);A(this,J);A(this,W);A(this,ie);A(this,X);A(this,Te,()=>{const{recoveredState:t}=this.props.uppy.getState();if(B(this,ie,null),B(this,X,null),t){B(this,W,Object.values(t.files).reduce((s,{progress:n})=>s+(n.bytesUploaded||0),0));return}B(this,J,performance.now()),B(this,W,0)});p(this,"startUpload",()=>{const{recoveredState:t}=this.props.uppy.getState();t?this.props.uppy.emit("restore-confirmed"):this.props.uppy.upload().catch(()=>{})})}componentDidMount(){B(this,J,performance.now()),B(this,W,this.props.uppy.getFiles().reduce((t,s)=>t+(s.progress.bytesUploaded||0),0)),this.props.uppy.on("upload",_(this,Te))}componentWillUnmount(){this.props.uppy.off("upload",_(this,Te))}render(){const{capabilities:t,files:s,allowNewUpload:n,totalProgress:r,error:a,recoveredState:l}=this.props.uppy.getState(),{newFiles:h,startedFiles:u,completeFiles:c,isUploadStarted:d,isAllComplete:f,isAllPaused:m,isUploadInProgress:b,isSomeGhost:C}=this.props.uppy.getObjectOfFilesPerState(),v=l?Object.values(s):h,g=!!t.resumableUploads,y=t.uploadProgress!==!1;let F=null,k=0;u.every(w=>w.progress.bytesTotal!=null&&w.progress.bytesTotal!==0)?(F=0,u.forEach(w=>{F+=w.progress.bytesTotal||0,k+=w.progress.bytesUploaded||0})):u.forEach(w=>{k+=w.progress.bytesUploaded||0});const M=re(this,je,fs).call(this,{uploaded:k,total:F});return o(ia,{error:a,uploadState:ra(a,f,l,s||{}),allowNewUpload:n,totalProgress:r,totalSize:F,totalUploadedSize:k,isAllComplete:f,isAllPaused:m,isUploadStarted:d,isUploadInProgress:b,isSomeGhost:C,recoveredState:l,complete:c.length,newFiles:v.length,numUploads:u.length,totalETA:M,files:s,i18n:this.props.i18n,uppy:this.props.uppy,startUpload:this.startUpload,doneButtonHandler:this.props.doneButtonHandler,resumableUploads:g,supportsUploadProgress:y,hideProgressDetails:this.props.hideProgressDetails,hideUploadButton:this.props.hideUploadButton,hideRetryButton:this.props.hideRetryButton,hidePauseResumeButton:this.props.hidePauseResumeButton,hideCancelButton:this.props.hideCancelButton,hideAfterFinish:this.props.hideAfterFinish})}}J=new WeakMap,W=new WeakMap,ie=new WeakMap,X=new WeakMap,Te=new WeakMap,je=new WeakSet,fs=function(t){if(t.total==null||t.total===0)return null;const s=t.total-t.uploaded;if(s<=0)return null;_(this,J)??B(this,J,performance.now());const n=performance.now()-_(this,J);if(n===0)return Math.round((_(this,X)??0)/100)/10;if(_(this,W)==null)return B(this,W,t.uploaded),null;const r=t.uploaded-_(this,W);if(B(this,W,t.uploaded),r<=0)return Math.round((_(this,X)??0)/100)/10;const a=r/n;if(!Number.isFinite(a)||a<=0)return null;const l=_(this,ie)==null?a:Wt(a,_(this,ie),sa,n);if(!Number.isFinite(l)||l<=0)return null;B(this,ie,l);const h=s/l;if(!Number.isFinite(h)||h<0)return null;const u=Math.max((_(this,X)??0)-n,0),c=_(this,X)==null?h:Wt(h,u,na,n);return!Number.isFinite(c)||c<0?null:(B(this,X,c),B(this,J,performance.now()),Math.round(c/100)/10)};const Si=900,Ti=700,ht=576,Pi=330;function oa(i){const e=i.totalFileCount===0,t=i.totalFileCount===1,s=i.containerWidth>ht,n=i.containerHeight>Pi,r=z({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":i.disabled,"uppy-Dashboard--animateOpenClose":i.animateOpenClose,"uppy-Dashboard--isClosing":i.isClosing,"uppy-Dashboard--isDraggingOver":i.isDraggingOver,"uppy-Dashboard--modal":!i.inline,"uppy-size--md":i.containerWidth>ht,"uppy-size--lg":i.containerWidth>Ti,"uppy-size--xl":i.containerWidth>Si,"uppy-size--height-md":i.containerHeight>Pi,"uppy-Dashboard--isAddFilesPanelVisible":i.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":i.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":i.singleFileFullScreen&&t&&n});let a=1;i.containerWidth>Si?a=5:i.containerWidth>Ti?a=4:i.containerWidth>ht&&(a=3);const l=i.showSelectedFiles&&!e,h=i.recoveredState?Object.keys(i.recoveredState.files).length:null,u=i.files?Object.keys(i.files).filter(f=>i.files[f].isGhost).length:0,c=()=>u>0?i.i18n("recoveredXFiles",{smart_count:u}):i.i18n("recoveredAllFiles");return o("div",{className:r,"data-uppy-theme":i.theme,"data-uppy-num-acquirers":i.acquirers.length,"data-uppy-drag-drop-supported":!i.disableLocalFiles&&Ns(),"aria-hidden":i.inline?"false":i.isHidden,"aria-disabled":i.disabled,"aria-label":i.inline?i.i18n("dashboardTitle"):i.i18n("dashboardWindowTitle"),onPaste:i.handlePaste,onDragOver:i.handleDragOver,onDragLeave:i.handleDragLeave,onDrop:i.handleDrop,children:[o("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:i.handleClickOutside}),o("div",{className:"uppy-Dashboard-inner",role:i.inline?void 0:"dialog",style:{width:i.inline&&i.width?i.width:"",height:i.inline&&i.height?i.height:""},children:[i.inline?null:o("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":i.i18n("closeModal"),title:i.i18n("closeModal"),onClick:i.closeModal,children:o("span",{"aria-hidden":"true",children:"Ã—"})}),o("div",{className:"uppy-Dashboard-innerWrap",children:[o("div",{className:"uppy-Dashboard-dropFilesHereHint",children:i.i18n("dropHint")}),l&&o(Hr,{...i}),h&&o("div",{className:"uppy-Dashboard-serviceMsg",children:[o("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:o("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[o("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),o("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),o("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),o("strong",{className:"uppy-Dashboard-serviceMsg-title",children:i.i18n("sessionRestored")}),o("div",{className:"uppy-Dashboard-serviceMsg-text",children:c()})]}),l?o(Nr,{id:i.id,i18n:i.i18n,uppy:i.uppy,files:i.files,resumableUploads:i.resumableUploads,hideRetryButton:i.hideRetryButton,hidePauseResumeButton:i.hidePauseResumeButton,hideCancelButton:i.hideCancelButton,showLinkToFileUploadResult:i.showLinkToFileUploadResult,showRemoveButtonAfterComplete:i.showRemoveButtonAfterComplete,metaFields:i.metaFields,toggleFileCard:i.toggleFileCard,handleRequestThumbnail:i.handleRequestThumbnail,handleCancelThumbnail:i.handleCancelThumbnail,recoveredState:i.recoveredState,individualCancellation:i.individualCancellation,openFileEditor:i.openFileEditor,canEditFile:i.canEditFile,toggleAddFilesPanel:i.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:a,containerWidth:i.containerWidth,containerHeight:i.containerHeight}):o(ls,{i18n:i.i18n,i18nArray:i.i18nArray,acquirers:i.acquirers,handleInputChange:i.handleInputChange,maxNumberOfFiles:i.maxNumberOfFiles,allowedFileTypes:i.allowedFileTypes,showNativePhotoCameraButton:i.showNativePhotoCameraButton,showNativeVideoCameraButton:i.showNativeVideoCameraButton,nativeCameraFacingMode:i.nativeCameraFacingMode,showPanel:i.showPanel,activePickerPanel:i.activePickerPanel,disableLocalFiles:i.disableLocalFiles,fileManagerSelectionType:i.fileManagerSelectionType,note:i.note,proudlyDisplayPoweredByUppy:i.proudlyDisplayPoweredByUppy}),o(Me,{children:i.showAddFilesPanel?o(sr,{...i,isSizeMD:s},"AddFiles"):null}),o(Me,{children:i.fileCardFor?o(pr,{...i},"FileCard"):null}),o(Me,{children:i.activePickerPanel?o(xr,{...i},"Picker"):null}),o(Me,{children:i.showFileEditor?o(nr,{...i},"Editor"):null}),o("div",{className:"uppy-Dashboard-progressindicators",children:[!i.disableInformer&&o(_i,{uppy:i.uppy}),!i.disableStatusBar&&o(aa,{uppy:i.uppy,i18n:i.i18n,hideProgressDetails:i.hideProgressDetails,hideUploadButton:i.hideUploadButton,hideRetryButton:i.hideRetryButton,hidePauseResumeButton:i.hidePauseResumeButton,hideCancelButton:i.hideCancelButton,hideAfterFinish:i.hideProgressAfterFinish,doneButtonHandler:i.doneButtonHandler}),!i.disableInformer&&o(_i,{uppy:i.uppy}),i.progressindicators.map(f=>i.uppy.getPlugin(f.id).render(i.state))]})]})]})]})}const la={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video",uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function ms(i,e){if(e){const t=i.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return i}function da(){let i=!1;return Cs((t,s)=>{const n=ms(t,s),r=n.contains(document.activeElement);if(r&&i)return;const a=n.querySelector("[data-uppy-super-focusable]");if(!(r&&!a))if(a)a.focus({preventScroll:!0}),i=!0;else{const l=n.querySelector(Ei);l==null||l.focus({preventScroll:!0}),i=!1}},260)}function ki(i,e){const t=e[0];t&&(t.focus(),i.preventDefault())}function ua(i,e){const t=e[e.length-1];t&&(t.focus(),i.preventDefault())}function ha(i){return i.contains(document.activeElement)}function gs(i,e,t){const s=ms(t,e),n=be(s.querySelectorAll(Ei)),r=n.indexOf(document.activeElement);ha(s)?i.shiftKey&&r===0?ua(i,n):!i.shiftKey&&r===n.length-1&&ki(i,n):ki(i,n)}function ca(i,e,t){e===null||gs(i,e,t)}const Di=9,pa=27;function Ai(){const i={};return i.promise=new Promise((e,t)=>{i.resolve=e,i.reject=t}),i}const fa={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Ys,showLinkToFileUploadResult:!1,hideProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var de,se,Pe,ue,Ge,Ke,Xe,ne,Ye,Qe,he,ee,Ft,Ct;class ma extends Ve{constructor(t,s){var r;const n=(s==null?void 0:s.autoOpen)??null;super(t,{...fa,...s,autoOpen:n});A(this,ee);A(this,de);p(this,"modalName",`uppy-Dashboard-${os()}`);p(this,"superFocus",da());p(this,"ifFocusedOnUppyRecently",!1);p(this,"dashboardIsDisabled");p(this,"savedScrollPosition");p(this,"savedActiveElement");p(this,"resizeObserver");p(this,"darkModeMediaQuery");p(this,"makeDashboardInsidesVisibleAnywayTimeout");p(this,"removeTarget",t=>{const n=this.getPluginState().targets.filter(r=>r.id!==t.id);this.setPluginState({targets:n})});p(this,"addTarget",t=>{const s=t.id||t.constructor.name,n=t.title||s,r=t.type;if(r!=="acquirer"&&r!=="progressindicator"&&r!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const a={id:s,name:n,type:r},h=this.getPluginState().targets.slice();return h.push(a),this.setPluginState({targets:h}),this.el});p(this,"hideAllPanels",()=>{var n;const t=this.getPluginState(),s={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};t.activePickerPanel===s.activePickerPanel&&t.showAddFilesPanel===s.showAddFilesPanel&&t.showFileEditor===s.showFileEditor&&t.activeOverlayType===s.activeOverlayType||(this.setPluginState(s),this.uppy.emit("dashboard:close-panel",(n=t.activePickerPanel)==null?void 0:n.id))});p(this,"showPanel",t=>{const{targets:s}=this.getPluginState(),n=s.find(r=>r.type==="acquirer"&&r.id===t);this.setPluginState({activePickerPanel:n,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",t)});p(this,"canEditFile",t=>{const{targets:s}=this.getPluginState();return _(this,ne).call(this,s).some(r=>this.uppy.getPlugin(r.id).canEditFile(t))});p(this,"openFileEditor",t=>{const{targets:s}=this.getPluginState(),n=_(this,ne).call(this,s);this.setPluginState({showFileEditor:!0,fileCardFor:t.id||null,activeOverlayType:"FileEditor"}),n.forEach(r=>{this.uppy.getPlugin(r.id).selectFile(t)})});p(this,"closeFileEditor",()=>{const{metaFields:t}=this.getPluginState();t&&t.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});p(this,"saveFileEditor",()=>{const{targets:t}=this.getPluginState();_(this,ne).call(this,t).forEach(n=>{this.uppy.getPlugin(n.id).save()}),this.closeFileEditor()});p(this,"openModal",()=>{const{promise:t,resolve:s}=Ai();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const n=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",n,!1),s()};this.el.addEventListener("animationend",n,!1)}else this.setPluginState({isHidden:!1}),s();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),t});p(this,"closeModal",t=>{var h;const s=(t==null?void 0:t.manualClose)??!0,{isHidden:n,isClosing:r}=this.getPluginState();if(n||r)return;const{promise:a,resolve:l}=Ai();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const u=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",u,!1),l()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),l();return document.removeEventListener("keydown",this.handleKeyDownInModal),s&&this.opts.browserBackButtonClose&&(h=history.state)!=null&&h[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),a});p(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);p(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());p(this,"setDarkModeCapability",t=>{const{capabilities:s}=this.uppy.getState();this.uppy.setState({capabilities:{...s,darkMode:t}})});p(this,"handleSystemDarkModeChange",t=>{const s=t.matches;this.uppy.log(`[Dashboard] Dark mode is ${s?"on":"off"}`),this.setDarkModeCapability(s)});p(this,"toggleFileCard",(t,s)=>{const n=this.uppy.getFile(s);t?this.uppy.emit("dashboard:file-edit-start",n):this.uppy.emit("dashboard:file-edit-complete",n),this.setPluginState({fileCardFor:t?s:null,activeOverlayType:t?"FileCard":null})});p(this,"toggleAddFilesPanel",t=>{this.setPluginState({showAddFilesPanel:t,activeOverlayType:t?"AddFiles":null})});p(this,"addFiles",t=>{const s=t.map(n=>({source:this.id,name:n.name,type:n.type,data:n,meta:{relativePath:n.relativePath||n.webkitRelativePath||null}}));try{this.uppy.addFiles(s)}catch(n){this.uppy.log(n)}});p(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(t=>{const s=t[0],{width:n,height:r}=s.contentRect;this.setPluginState({containerWidth:n,containerHeight:r,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const t=this.getPluginState(),s=!this.opts.inline&&t.isHidden;!t.areInsidesReadyToBeVisible&&!s&&(this.uppy.log("[Dashboard] resize event didnâ€™t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});p(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});p(this,"recordIfFocusedOnUppyRecently",t=>{this.el.contains(t.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});p(this,"disableInteractiveElements",t=>{const s=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],n=_(this,de)??be(this.el.querySelectorAll(s)).filter(r=>!r.classList.contains("uppy-Dashboard-close"));for(const r of n)r.tagName==="A"?r.setAttribute("aria-disabled",t):r.disabled=t;t?B(this,de,n):B(this,de,null),this.dashboardIsDisabled=t});p(this,"updateBrowserHistory",()=>{var t;(t=history.state)!=null&&t[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});p(this,"handlePopState",t=>{var s;this.isModalOpen()&&(!t.state||!t.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((s=t.state)!=null&&s[this.modalName])&&history.back()});p(this,"handleKeyDownInModal",t=>{t.keyCode===pa&&this.requestCloseModal(),t.keyCode===Di&&gs(t,this.getPluginState().activeOverlayType,this.el)});p(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});p(this,"handlePaste",t=>{this.uppy.iteratePlugins(n=>{var r;n.type==="acquirer"&&((r=n.handleRootPaste)==null||r.call(n,t))});const s=be(t.clipboardData.files);s.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(s))});p(this,"handleInputChange",t=>{t.preventDefault();const s=be(t.currentTarget.files||[]);s.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(s))});p(this,"handleDragOver",t=>{t.preventDefault(),t.stopPropagation();const s=()=>{let l=!0;return this.uppy.iteratePlugins(h=>{var u;(u=h.canHandleRootDrop)!=null&&u.call(h,t)&&(l=!0)}),l},n=()=>{const{types:l}=t.dataTransfer;return l.some(h=>h==="Files")},r=s(),a=n();if(!r&&!a||this.opts.disabled||this.opts.disableLocalFiles&&(a||!r)||!this.uppy.getState().allowNewUpload){t.dataTransfer.dropEffect="none";return}t.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(t)});p(this,"handleDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(t)});p(this,"handleDrop",async t=>{t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(a=>{var l;a.type==="acquirer"&&((l=a.handleRootDrop)==null||l.call(a,t))});let s=!1;const n=a=>{this.uppy.log(a,"error"),s||(this.uppy.info(a.message,"error"),s=!0)};this.uppy.log("[Dashboard] Processing dropped files");const r=await Es(t.dataTransfer,{logDropError:n});r.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(r)),this.opts.onDrop(t)});p(this,"handleRequestThumbnail",t=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",t)});p(this,"handleCancelThumbnail",t=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",t)});p(this,"handleKeyDownInInline",t=>{t.keyCode===Di&&ca(t,this.getPluginState().activeOverlayType,this.el)});p(this,"handlePasteOnBody",t=>{this.el.contains(document.activeElement)&&this.handlePaste(t)});p(this,"handleComplete",({failed:t})=>{this.opts.closeAfterFinish&&!(t!=null&&t.length)&&this.requestCloseModal()});A(this,se,()=>{if(this.opts.disableThumbnailGenerator)return;const t=600,s=this.uppy.getFiles();if(s.length===1){const n=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);n==null||n.setOptions({thumbnailWidth:t});const r={...s[0],preview:void 0};n==null||n.requestThumbnail(r).then(()=>{n==null||n.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});A(this,Pe,t=>{const s=t[0],{metaFields:n}=this.getPluginState(),r=n&&n.length>0,a=this.canEditFile(s);r&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,s.id):a&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(s)});p(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const t=jt(this.opts.trigger);t?t.forEach(s=>s.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",_(this,he)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",_(this,se)),this.uppy.on("file-removed",_(this,se)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",_(this,Pe))});p(this,"removeEvents",()=>{const t=jt(this.opts.trigger);!this.opts.inline&&t&&t.forEach(s=>s.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",_(this,he)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",_(this,se)),this.uppy.off("file-removed",_(this,se)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",_(this,Pe))});p(this,"superFocusOnEachUpdate",()=>{const t=this.el.contains(document.activeElement),s=document.activeElement===document.body||document.activeElement===null,n=this.uppy.getState().info.length===0,r=!this.opts.inline;n&&(r||t||s&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});p(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});p(this,"saveFileCard",(t,s)=>{this.uppy.setFileMeta(s,t),this.toggleFileCard(!1,s)});A(this,ue,t=>{const s=this.uppy.getPlugin(t.id);return{...t,icon:s.icon||this.opts.defaultPickerIcon,render:s.render}});A(this,Ge,t=>{const s=this.uppy.getPlugin(t.id);return typeof s.isSupported!="function"?!0:s.isSupported()});A(this,Ke,t=>t.filter(s=>s.type==="acquirer"&&_(this,Ge).call(this,s)).map(_(this,ue)));A(this,Xe,t=>t.filter(s=>s.type==="progressindicator").map(_(this,ue)));A(this,ne,t=>t.filter(s=>s.type==="editor").map(_(this,ue)));p(this,"render",t=>{const s=this.getPluginState(),{files:n,capabilities:r,allowNewUpload:a}=t,{newFiles:l,uploadStartedFiles:h,completeFiles:u,erroredFiles:c,inProgressFiles:d,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:b,isAllComplete:C,isAllPaused:v}=this.uppy.getObjectOfFilesPerState(),g=_(this,Ke).call(this,s.targets),y=_(this,Xe).call(this,s.targets),F=_(this,ne).call(this,s.targets);let k;return this.opts.theme==="auto"?k=r.darkMode?"dark":"light":k=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),oa({state:t,isHidden:s.isHidden,files:n,newFiles:l,uploadStartedFiles:h,completeFiles:u,erroredFiles:c,inProgressFiles:d,inProgressNotPausedFiles:f,processingFiles:m,isUploadStarted:b,isAllComplete:C,isAllPaused:v,totalFileCount:Object.keys(n).length,totalProgress:t.totalProgress,allowNewUpload:a,acquirers:g,theme:k,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:s.activePickerPanel,showFileEditor:s.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:s.isClosing,progressindicators:y,editors:F,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:t.recoveredState,metaFields:s.metaFields,resumableUploads:r.resumableUploads||!1,individualCancellation:r.individualCancellation,isMobileDevice:r.isMobileDevice,fileCardFor:s.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:s.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:s.containerWidth,containerHeight:s.containerHeight,areInsidesReadyToBeVisible:s.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:s.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop,disableInformer:this.opts.disableInformer,disableStatusBar:this.opts.disableStatusBar,hideProgressDetails:this.opts.hideProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideProgressAfterFinish:this.opts.hideProgressAfterFinish,doneButtonHandler:this.opts.doneButtonHandler})});A(this,Ye,()=>{const{plugins:t}=this.opts;t.forEach(s=>{const n=this.uppy.getPlugin(s);n?n.mount(this,n):this.uppy.log(`[Uppy] Dashboard could not find plugin '${s}', make sure to uppy.use() the plugins you are specifying`,"warning")})});A(this,Qe,()=>{this.uppy.iteratePlugins(_(this,he))});A(this,he,t=>{var n;const s=["acquirer","editor"];t&&!((n=t.opts)!=null&&n.target)&&s.includes(t.type)&&(this.getPluginState().targets.some(a=>t.id===a.id)||t.mount(this,t))});p(this,"install",()=>{var h;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:t,closeAfterFinish:s}=this.opts;if(t&&s)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:n,allowMultipleUploadBatches:r}=this.uppy.opts;(n||r)&&s&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:a}=this.opts;a&&this.mount(a,this),this.opts.disableThumbnailGenerator||this.uppy.use(as,{id:re(this,ee,Ct).call(this),...re(this,ee,Ft).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const l=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l),this.opts.theme==="auto"&&((h=this.darkModeMediaQuery)==null||h.addListener(this.handleSystemDarkModeChange)),_(this,Ye).call(this),_(this,Qe).call(this),this.initEvents()});p(this,"uninstall",()=>{var s;if(!this.opts.disableThumbnailGenerator){const n=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);n&&this.uppy.removePlugin(n)}const{plugins:t}=this.opts;t.forEach(n=>{const r=this.uppy.getPlugin(n);r&&r.unmount()}),this.opts.theme==="auto"&&((s=this.darkModeMediaQuery)==null||s.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=la,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(r=this.opts).onRequestCloseModal??(r.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(t){var s;super.setOptions(t),(s=this.uppy.getPlugin(re(this,ee,Ct).call(this)))==null||s.setOptions(re(this,ee,Ft).call(this))}}de=new WeakMap,se=new WeakMap,Pe=new WeakMap,ue=new WeakMap,Ge=new WeakMap,Ke=new WeakMap,Xe=new WeakMap,ne=new WeakMap,Ye=new WeakMap,Qe=new WeakMap,he=new WeakMap,ee=new WeakSet,Ft=function(){const{thumbnailWidth:t,thumbnailHeight:s,thumbnailType:n,waitForThumbnailsBeforeUpload:r}=this.opts;return{thumbnailWidth:t,thumbnailHeight:s,thumbnailType:n,waitForThumbnailsBeforeUpload:r,lazy:!r}},Ct=function(){return`${this.id}:ThumbnailGenerator`},p(ma,"VERSION",ir.version);export{ma as default};
